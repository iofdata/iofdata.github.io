<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mysql Notes | The Eye of Data (@Buttonwood)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="基本点
databasetablecolumndatatyperowprimary key(unique and non-null)(不更新主键列中的值；不重用主键列的值；不在主键列中使用可能会更改的值；)        
SQL(Structured Query Language)        
MySQL AdministratorMySQL Query Browser        
初见">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql Notes">
<meta property="og:url" content="http://buttonwood.bitbucket.org//2014/06/17/mysql/">
<meta property="og:site_name" content="The Eye of Data (@Buttonwood)">
<meta property="og:description" content="基本点
databasetablecolumndatatyperowprimary key(unique and non-null)(不更新主键列中的值；不重用主键列的值；不在主键列中使用可能会更改的值；)        
SQL(Structured Query Language)        
MySQL AdministratorMySQL Query Browser        
初见">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mysql Notes">
<meta name="twitter:description" content="基本点
databasetablecolumndatatyperowprimary key(unique and non-null)(不更新主键列中的值；不重用主键列的值；不在主键列中使用可能会更改的值；)        
SQL(Structured Query Language)        
MySQL AdministratorMySQL Query Browser        
初见">
  
    <link rel="alternative" href="/atom.xml" title="The Eye of Data (@Buttonwood)" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">The Eye of Data (@Buttonwood)</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Float like a butterfly! Stand like a buttonwood!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://buttonwood.bitbucket.org/"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/17/mysql/" class="article-date">
  <time datetime="2014-06-17T00:00:00.000Z" itemprop="datePublished">Jun 17 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tools/">Tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Mysql Notes
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="基本点">基本点</h3>
<p>database<br>table<br>column<br>datatype<br>row<br>primary key(unique and non-null)<br>(不更新主键列中的值；不重用主键列的值；不在主键列中使用可能会更改的值；)        </p>
<p>SQL(Structured Query Language)        </p>
<p>MySQL Administrator<br>MySQL Query Browser        </p>
<h3 id="初见">初见</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>mysql -h 110.110.110.110 -uroot -p abcd123

mysqladmin -uroot -password ab12

grant select,insert,update,
delete on <span class="emphasis">*.*</span> to [<span class="link_label">email=test2@localhost</span>][<span class="link_reference">color=#355e9e</span>]test2@localhost[<span class="link_label">/color</span>][<span class="link_reference">/email</span>] identified by \"abc\";

create/drop database database-name;
show databases;
use database-name;
show tables;

show columns from table-name; <span class="xml"><span class="tag">&lt;<span class="title">=</span>&gt;</span></span> describe table-name;

show grants;    show status;    show errors;
</pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="SQL_语法">SQL 语法</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> products;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> products;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id,prod_price <span class="keyword">FROM</span> products;</span>

<span class="operator"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> vend_id <span class="keyword">FROM</span> products;</span> # 返回不同的值

<span class="operator"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> products LIMIT <span class="number">5</span>;</span> # 前5行
<span class="operator"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> products LIMIT <span class="number">5</span>,<span class="number">10</span>;</span> # 从第5行开始的10行；

<span class="operator"><span class="keyword">SELECT</span> products.prod_name <span class="keyword">FROM</span> products;</span> # 限定表名的列
<span class="operator"><span class="keyword">SELECT</span> products.prod_name <span class="keyword">FROM</span> crashcourse.products;</span> # 限定数据库的表


<span class="operator"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> products <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id,prod_price <span class="keyword">FROM</span> products <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name,prod_id;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id,prod_price <span class="keyword">FROM</span> products <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name <span class="keyword">DESC</span>;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id,prod_price <span class="keyword">FROM</span> products <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name <span class="keyword">DESC</span>,prod_id;</span>
</pre></td></tr></table></figure>

<h3 id="过滤条件">过滤条件</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_price = <span class="number">2.50</span>; 
&lt;;  &lt;&gt;; !=; &lt;=; &gt;; &gt;=; BETWEEN <span class="keyword">AND</span>;
</pre></td></tr></table></figure>

<h3 id="组合过滤">组合过滤</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_price = <span class="number">2.50</span> <span class="keyword">AND</span> prod_id &lt; <span class="number">1000</span>;
<span class="keyword">AND</span>; <span class="keyword">OR</span>;  (<span class="keyword">AND</span> 优先级高于 <span class="keyword">OR</span>); <span class="keyword">IN</span> (<span class="keyword">IN</span> 比 <span class="keyword">OR</span> 快); <span class="keyword">NOT</span>； 

<span class="keyword">SELECT</span> prod_name,prod_price <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> (vend_id = <span class="number">10002</span> <span class="keyword">OR</span> vend_id = <span class="number">10003</span> ) <span class="keyword">AND</span> prod_price &lt;= <span class="number">1000</span>;

<span class="keyword">SELECT</span> prod_name,prod_price <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> vend_id <span class="keyword">IN</span> (<span class="number">10002</span>,<span class="number">10003</span>) <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;
 
<span class="keyword">SELECT</span> prod_name,prod_price <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> vend_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">10002</span>,<span class="number">10003</span>) <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;
</pre></td></tr></table></figure>

<h3 id="空值">空值</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_price <span class="keyword">is</span> <span class="keyword">NULL</span>;</span>
</pre></td></tr></table></figure>

<h3 id="通配符_LIKE_(列匹配)">通配符 LIKE (列匹配)</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>%(任何字符出现任何次数)；_(与%一样，但只匹配单个字符)

<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_name <span class="keyword">LIKE</span> <span class="string">'jet%'</span>;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_name <span class="keyword">LIKE</span> <span class="string">'%jet%'</span>;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_name <span class="keyword">LIKE</span> <span class="string">'%jet'</span>;</span>
<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_name <span class="keyword">LIKE</span> <span class="string">'s%e'</span>;</span>

<span class="operator"><span class="keyword">SELECT</span> prod_name,prod_id <span class="keyword">FROM</span> products <span class="keyword">WHERE</span>  prod_name <span class="keyword">LIKE</span> <span class="string">'_ ton anvil'</span>;</span>
</pre></td></tr></table></figure>

<h3 id="正则表达式_REGEXP_(行匹配)">正则表达式 REGEXP (行匹配)</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="code"><pre>SELECT prod_name FROM products WHERE prod_name REGEXP <span class="string">'1000'</span> ORDER BY prod_name;

.(任意一个字符); 
|;  <span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>
[]; [a-z]
[:alnum:]; [a-zA-Z0-<span class="number">9</span>]
\\.; .
\\-; -
\\f; 换页
\\n; 换行
\\r; 回车
\\t; 制表
\\v; 纵向制表

*; &gt;=<span class="number">0</span> 个
+; &gt;=<span class="number">1</span> 个;  {<span class="number">1</span>,}
?; <span class="number">0</span>个或<span class="number">1</span>个; {<span class="number">0</span>;<span class="number">1</span>}
{n};    n次
{n,};   &gt;=n; 
{n,m}   (m&lt;=<span class="number">255</span>);

^; 句首
$; 句尾
<span class="string">[[:&lt;:]]</span>; 词首
<span class="string">[[:&gt;:]]</span>; 词尾

SELECT prod_name FROM products WHERE prod_name REGEXP <span class="string">'.000'</span> ORDER BY prod_name;

REGEXP <span class="string">'^[0-9\\.]'</span>
REGEXP <span class="string">'[[:digit:]]{4}'</span>
REGEXP <span class="string">'[0-9]{4}'</span>
REGEXP <span class="string">'[0-9][0-9][0-9][0-9]'</span>
</pre></td></tr></table></figure>

<h3 id="创建计算字段">创建计算字段</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre>Concat； (concatenate拼接)

<span class="operator"><span class="keyword">SELECT</span> Concat(RTrim(vend_name), <span class="string">' ('</span>, vend_country, <span class="string">')'</span>) <span class="keyword">FROM</span> vendors <span class="keyword">WHERE</span> vend_price &lt; <span class="number">1000</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</span>

#### 计算
<span class="operator"><span class="keyword">SELECT</span> prod_id, quantity, item_price, quantity*item_price <span class="keyword">AS</span> expanded_price <span class="keyword">FROM</span> <span class="keyword">order</span> items <span class="keyword">WHERE</span> order_num = <span class="number">20005</span>;</span>

#### 使用函数
RTrim();
LTrim();
Upper();
Lower();
Left();
Length();
Soundex(); //将任何文本串转化为其语音表示的字母数字模式的算法
SubString();


<span class="operator"><span class="keyword">SELECT</span> cust_id, order_num <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> <span class="keyword">Year</span>(order_data) = <span class="number">2005</span> <span class="keyword">AND</span> <span class="keyword">Month</span>(order_date) = <span class="number">9</span>;</span>
</pre></td></tr></table></figure>   

<h3 id="分组数据">分组数据</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">SELECT</span> vend_id, <span class="aggregate">COUNT</span>(*) <span class="keyword">AS</span> num_prods <span class="keyword">FROM</span> products <span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id;</span>

#### 过滤分组
//Where 过滤指定的是行而不是分组，也没有分组的概念；having过滤分组；
//Where 在数据分组前过滤，having在数据分组后过滤；
<span class="operator"><span class="keyword">SELECT</span> vend_id, <span class="aggregate">COUNT</span>(*) <span class="keyword">AS</span> num_prods <span class="keyword">FROM</span> products <span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id <span class="keyword">HAVING</span> num_prods &gt;=<span class="number">2</span> ;</span>
</pre></td></tr></table></figure>

<h3 id="子查询">子查询</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">SELECT</span> order_num <span class="keyword">FROM</span> orderitems <span class="keyword">WHERE</span> prod_id = <span class="string">"TNT2"</span>;</span>  // 订单信息
<span class="operator"><span class="keyword">SELECT</span> cust_id <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_num <span class="keyword">IN</span> (<span class="number">20005</span>,<span class="number">20007</span>);</span> // 客户id
<span class="operator"><span class="keyword">SELECT</span> cust_name,cust_contact <span class="keyword">FROM</span> customers <span class="keyword">WHERE</span> cust_id <span class="keyword">IN</span> (<span class="number">10001</span>,<span class="number">10004</span>);</span> // 客户信息

<span class="operator"><span class="keyword">SELECT</span> cust_name,cust_contact <span class="keyword">FROM</span> customers <span class="keyword">WHERE</span> cust_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> cust_id <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_num <span class="keyword">IN</span> (<span class="keyword">SELECT</span> order_num <span class="keyword">FROM</span> orderitems <span class="keyword">WHERE</span> prod_id = <span class="string">"TNT2"</span>));</span>

//表别名及联结
<span class="operator"><span class="keyword">SELECT</span> cust_name,cust_contact 
<span class="keyword">FROM</span> customers <span class="keyword">AS</span> c, orders <span class="keyword">AS</span> o, <span class="keyword">order</span> items <span class="keyword">AS</span> oi
<span class="keyword">WHERE</span> c.cust_id = o.cust_id
<span class="keyword">AND</span> oi.oder_num = o.order_num
<span class="keyword">AND</span> prod_id = <span class="string">'TNT2'</span>

//注意限制有歧义性的子查询
<span class="keyword">SELECT</span> cust_name,cusr_stat,(<span class="keyword">SELECT</span> <span class="aggregate">COUNT</span>(*) <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> orders.cust_id = customers.cust_id) <span class="keyword">AS</span> orders <span class="keyword">FROM</span> customers;</span>
</pre></td></tr></table></figure>

<h3 id="联结表_join_table">联结表 join table</h3>
<p>相同数据出现多次并不好，关系表设计就是保证把信息分成多个表，一类数据一个表，通过某些常用值关联，便于管理、修改和维护。 </p>
<p>比如供应商表vendors和产品表products。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="code"><pre>//联结表的创建非常简单，规定要联结的所有表以及它们如何关联即可
//注意确保WHERE语句的正确性
<span class="operator"><span class="keyword">SELECT</span> vend_name,prod_name,prod_price 
<span class="keyword">FROM</span> vendors,products
<span class="keyword">WHERE</span> vendors.vend_id = products.vend_id
<span class="keyword">ORDER</span> <span class="keyword">BY</span>  vend_name,prod_name

//内部联结 <span class="keyword">inner</span> <span class="keyword">join</span>
<span class="keyword">SELECT</span> vend_name,prod_name,prod_price 
<span class="keyword">FROM</span> vendors
<span class="keyword">INNER</span> <span class="keyword">JOIN</span> products 
<span class="keyword">ON</span> vendors.vend_id = products.vend_id

<span class="keyword">SELECT</span> customers.cust_id,orders.order_num
<span class="keyword">FROM</span> customers
<span class="keyword">INNER</span> <span class="keyword">JOIN</span> orders 
<span class="keyword">ON</span> customers.cust_id = orders.cust_id

//外部链接，包含那些相关表中没有关联行的行  <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="keyword">ON</span>
<span class="keyword">SELECT</span> customers.cust_id,orders.order_num
<span class="keyword">FROM</span> customers
<span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> orders //从左边表customers选择行行为
<span class="keyword">ON</span> customers.cust_id = orders.cust_id

//聚集函数，数据汇总
<span class="keyword">SELECT</span> customers.cust_name,
       customers.cust_id,
       <span class="aggregate">COUNT</span>(orders.order_num) <span class="keyword">AS</span> ord_num
<span class="keyword">FROM</span> customers 
<span class="keyword">INNER</span> <span class="keyword">JOIN</span> orders // <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> 亦可，匹配未下单客户
<span class="keyword">ON</span> customers.cust_id = orders.cust_id
<span class="keyword">GROUP</span> <span class="keyword">BY</span> customers.cust_id;</span>
</pre></td></tr></table></figure>

<h3 id="组合查询_union">组合查询 union</h3>
<p>在单个查询中从不同表中返回类似结构的数据<br>对单个表执行多个查询，按当个查询返回数据</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">SELECT</span> vend_id,prod_id,prod_price
<span class="keyword">FROM</span> products
<span class="keyword">WHERE</span> prod_price &lt;= <span class="number">5</span>
<span class="keyword">UNION</span>
<span class="keyword">SELECT</span> vend_id,prod_id,prod_price
<span class="keyword">FROM</span> products
<span class="keyword">WHERE</span> vend_id <span class="keyword">IN</span> (<span class="number">10001</span>,<span class="number">10003</span>)

<span class="keyword">SELECT</span> vend_id,prod_id,prod_price
<span class="keyword">FROM</span> products
<span class="keyword">WHERE</span> prod_price &lt;= <span class="number">5</span> 
<span class="keyword">OR</span> vend_id <span class="keyword">IN</span> (<span class="number">10001</span>,<span class="number">10003</span>)</span>
</pre></td></tr></table></figure>

<p>UNION 必须有两条或两条以上的SELECT语句<br>每个查询必须有相同的列、表达式或者聚集函数<br>列数据必须兼容，类型不必完全相同<br>重复结果自动删除(UNION ALL)<br>最后一条语句使用OERDER BY</p>
<h3 id="全文本搜索">全文本搜索</h3>
<p>一般创建表时使用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> productnotes        
(                
note_id    <span class="keyword">int</span>    <span class="keyword">NOT</span> <span class="keyword">NULL</span>    AUTO_INCREMENT        
prod_id    <span class="keyword">char</span>(<span class="number">10</span>)    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,        
note_date    <span class="keyword">date</span> <span class="keyword">time</span>    <span class="keyword">NULL</span>,        
note_text    text    <span class="keyword">NULL</span>,        
<span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>(note_id),        
FULLTEXT(note_text)        
) ENGIN=MyISAM</span>
</pre></td></tr></table></figure>

<p>创建表时指定FULLTEXT，不要在导入数据时使用  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre><span class="keyword">SELECT</span> note_text
FORM productnotes 
WHERE Match(note_text) Against(<span class="attribute">'rabbit</span>');
// WHERE Match(note_text) Against(<span class="attribute">'rabbit</span>' <span class="keyword">WITH</span> QUERY EXPANSION); 查询扩展
// WHERE note_text LIKE '%rabbit%';

<span class="keyword">SELECT</span> note_text,
    Match(note_text) Against(<span class="attribute">'rabbit</span>') AS rank
FORM productnotes 

// 布尔文本搜索，即使没有FULLTEXT索引也可以用，但是慢
<span class="keyword">SELECT</span> note_text
FORM productnotes 
WHERE Match(note_text) Against(<span class="attribute">'rabbit</span>' <span class="keyword">IN</span> <span class="typename">BOOLEAN</span> MODE);
// WHERE Match(note_text) Against(<span class="attribute">'rabbit</span> -rope*' <span class="keyword">IN</span> <span class="typename">BOOLEAN</span> MODE);

+ 包含一个词
- 排除
&gt; 包含，增加等级
&lt; 包含，减少等级
() 把词组成表达式
~ 取消一个词的排序值
* 词尾通配符
<span class="string">""</span> 定义一个短语

//WHERE Match(note_text) Against('+rabbit +rope' <span class="keyword">IN</span> <span class="typename">BOOLEAN</span> MODE);
//WHERE Match(note_text) Against(<span class="attribute">'rabbit</span> rope' <span class="keyword">IN</span> <span class="typename">BOOLEAN</span> MODE);
//WHERE Match(note_text) Against('<span class="string">"rabbit rope"</span>' <span class="keyword">IN</span> <span class="typename">BOOLEAN</span> MODE);
//WHERE Match(note_text) Against('&gt;rabbit &lt;rope' <span class="keyword">IN</span> <span class="typename">BOOLEAN</span> MODE);
</pre></td></tr></table></figure>      

<h3 id="插入数据_INSERT">插入数据 INSERT</h3>
<p>插入完整的行<br>插入行的一部分<br>插入多行<br>插入某些查询结果        </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers
<span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">'Pop E. LA'</span>, <span class="string">'100 Main Street'</span>, <span class="string">'Los Angeles'</span>, <span class="string">'CA'</span>, <span class="string">'900046'</span>, <span class="string">'USA'</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>);</span>

// 安全做法，指名列
<span class="operator"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country,cust_contact,cust_email)
<span class="keyword">VALUES</span>(<span class="string">'Pop E. LA'</span>, <span class="string">'100 Main Street'</span>, <span class="string">'Los Angeles'</span>, <span class="string">'CA'</span>, <span class="string">'900046'</span>, <span class="string">'USA'</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>);</span>

//多条 <span class="operator"><span class="keyword">INSERT</span> 语句；相隔
//多条语句如果插入列相同，Valuse可用(),() 逗号相隔

// <span class="keyword">INSERT</span> <span class="keyword">SELECT</span>
<span class="keyword">INSERT</span> <span class="keyword">INTO</span>  customer_new(cust_id,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country,cust_contact,cust_email)        
<span class="keyword">SELECT</span> cust_id,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country,cust_contact,cust_email         
<span class="keyword">FROM</span> customer</span>
</pre></td></tr></table></figure>

<h3 id="更新或删除数据_UPDATE_/_DELETE">更新或删除数据 UPDATE / DELETE</h3>
<p>更新表中特定行<br>更新表中所有行(要小心)   </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">UPDATE</span> customers        
<span class="keyword">SET</span> cust_email = <span class="string">'test@info.me'</span> 
//删除某个列的值 <span class="keyword">SET</span> cust_email = <span class="keyword">NULL</span>         
<span class="keyword">WHERE</span> cust_id = <span class="number">10005</span>     
   
<span class="keyword">DELETE</span> <span class="keyword">FROM</span> customers        
<span class="keyword">WHERE</span>  cust_id = <span class="number">10005</span> 
// <span class="keyword">DELETE</span> 删除整行，<span class="keyword">UPDATE</span>可删除整列
// <span class="keyword">DELETE</span> 删除表的内容而不是表
// 更快的删除 <span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span>， 删除原来的表并重新创建一个表</span>
</pre></td></tr></table></figure>


<h3 id="创建和操纵表">创建和操纵表</h3>
<p>使用交互式方式创建和管理表<br>mysql命令行     </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customers        
(                
cust_id        <span class="keyword">int</span>    <span class="keyword">NOT</span> <span class="keyword">NULL</span>    AUTO_INCREMENT,        
cust_name      <span class="keyword">char</span>(<span class="number">50</span>)    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,        
cust_city      <span class="keyword">char</span>(<span class="number">50</span>)    <span class="keyword">NULL</span>,   
cust_state     <span class="keyword">char</span>(<span class="number">50</span>)    <span class="keyword">NULL</span>,
cust_zip       <span class="keyword">char</span>(<span class="number">50</span>)    <span class="keyword">NULL</span>,
cust_country   <span class="keyword">char</span>(<span class="number">50</span>)    <span class="keyword">NULL</span>,     
cust_email     <span class="keyword">char</span>(<span class="number">50</span>)    <span class="keyword">NULL</span>,       
<span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>(cust_id),        
) ENGIN=InnoDB;</span>

// 主键使用单个列，其值必须唯一；多个列，列组合值必须唯一
// 主键可以在创建表时定义，也可以在之后定义
// 每个表只允许一个AUTO_INCREMENT列，而且它必须被索引

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orderitems        
(                
order_num        <span class="keyword">int</span>        <span class="keyword">NOT</span> <span class="keyword">NULL</span>,        
order_item       <span class="keyword">int</span>        <span class="keyword">NOT</span> <span class="keyword">NULL</span>,          
prod_id          <span class="keyword">char</span>(<span class="number">10</span>)   <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  
quantity         <span class="keyword">int</span>        <span class="keyword">NOT</span> <span class="keyword">NULL</span>    <span class="keyword">DEFAULT</span> <span class="number">0</span>,
item_price       <span class="keyword">decimal</span>(<span class="number">8</span>,<span class="number">2</span>)    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,      
<span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>(order_num,order_item),        
) ENGIN=InnoDB;</span>

// InnoDB 是一个可靠的事务处理引擎，不支持全文搜索；
// MEMORY 功能上等同与MyISAM，数据存储在内存中，速度很快，适用于临时表
// MyISAM 是一个性能极高的引擎，支持全文搜索，不支持事务处理

// 在表的设计中需要花费大量时间来考虑，以便后期不对该表进行大的改动
// 更新表 <span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>
// <span class="keyword">ALTER</span> <span class="keyword">TABLE</span>要极小心，改动前先备份，更改不能撤销，增加了不能删除，删除了不能恢复
<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> vendors
<span class="keyword">ADD</span> vend_phone <span class="keyword">CHAR</span>(<span class="number">20</span>)

// 外键
<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> orders
<span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_orders_customers 
<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (prod_id)
<span class="keyword">REFERENCES</span> customers (cuts_id);</span>

<span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products
<span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_products_vendors 
<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (vend_id)
<span class="keyword">REFERENCES</span> vendors (vend_id);</span>

// 删除表 <span class="operator"><span class="keyword">DROP</span>
<span class="keyword">DROP</span> <span class="keyword">TABLE</span> customers；

// 重命名 RENAME
RENAME <span class="keyword">TABLE</span> test <span class="keyword">TO</span> customers;</span>

<span class="operator">RENAME <span class="keyword">TABLE</span> back_customers <span class="keyword">TO</span> customers,
    back_vendors <span class="keyword">TO</span> vendors,
    back_products <span class="keyword">TO</span> products;</span>
</pre></td></tr></table></figure>

<h3 id="使用视图">使用视图</h3>
<p>视图是虚拟的表，动态查询的封装；视图主要用于检索数据</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="code"><pre><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span>
<span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> viewname
<span class="keyword">DROP</span> <span class="keyword">VIEW</span> viewname
<span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">VIEW</span> 

<span class="keyword">CREATE</span> <span class="keyword">VIEW</span> product_customers <span class="keyword">AS</span> 
<span class="keyword">SELECT</span> cust_name, cust_contact, prod_id
<span class="keyword">FROM</span> customers, orders, orderitems
<span class="keyword">WHERE</span> customers.cust_id = orders.cust_id
<span class="keyword">AND</span> orderitems.order_num  = orders.order_num;</span>

<span class="operator"><span class="keyword">SELECT</span> cust_name, cust_contact 
<span class="keyword">FROM</span> product_customers
<span class="keyword">WHERE</span> prod_id = <span class="string">'TNT2'</span>;</span>

// 格式化
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vendor_locations <span class="keyword">AS</span>
<span class="keyword">SELECT</span> Concat(RTrim(vend_name), <span class="string">' ('</span>, vend_country, <span class="string">')'</span>) <span class="keyword">AS</span> vend_title
<span class="keyword">FROM</span> vendors
<span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</span>

// 视图过滤
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> customer_email_list <span class="keyword">AS</span>
<span class="keyword">SELECT</span> cust_id,cust_name,cust_eamil
<span class="keyword">FROM</span> customers
<span class="keyword">WHERE</span> cust_email <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span>

// 视图与计算字段
<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> orderitems_expanded  <span class="keyword">AS</span>
<span class="keyword">SELECT</span> order_num, prod_id, quantity, item_price,
    quantity * item_price <span class="keyword">AS</span> expanded_price
<span class="keyword">FROM</span> orderitems;</span>

// 更新视图
// 可以对其使用<span class="operator"><span class="keyword">INSERT</span>、<span class="keyword">UPDATE</span>、<span class="keyword">DELETE</span>操作，更新一个视图将更新其基表

// 以下视图不能操作
// 分组 <span class="keyword">GROUP</span> <span class="keyword">BY</span> 和 <span class="keyword">HAVING</span>
// 联结
// 子查询
// 并
// 聚集函数，<span class="aggregate">Min</span>，<span class="aggregate">Count</span>，<span class="aggregate">Sum</span>
// <span class="keyword">DISTINCT</span>
// 导出计算列</span>
</pre></td></tr></table></figure>

<h3 id="存储过程">存储过程</h3>
<p>为以后的使用而保存的一条或多条mysql语句的集合，可以视为批文件；<br>存储过程的3个主要好处：简单、安全、高性能；<br>存储过程的编写比SQL语句复杂；<br>多数人可能只有使用权限而没有创建权限；        </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre><span class="comment">// 执行,类似函数</span>
CALL product_pricing(@price_low,@price_high,@price_avergae);

<span class="comment">// 编写</span>
<span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">product_pricing</span><span class="params">()</span>
<span class="title">BEGIN</span> 
    <span class="title">SELECT</span> <span class="title">Avg</span><span class="params">(prod_price)</span> <span class="title">AS</span> <span class="title">price_avergae</span>
    <span class="title">FROM</span> <span class="title">products</span>;</span>
<span class="keyword">END</span>;

<span class="comment">// 删除</span>
DROP product_pricing;

<span class="comment">// 一般，存贮过程并不显示结果，而是返回给指定变量</span>
<span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">product_pricing</span><span class="params">(
    <span class="keyword">OUT</span> pl DECIMAL(8,2)</span>, // <span class="title">IN</span> 传入
    <span class="title">OUT</span> <span class="title">ph</span> <span class="title">DECIMAL</span><span class="params">(8,2)</span>, // <span class="title">OUT</span> 传出
    <span class="title">OUT</span> <span class="title">pa</span> <span class="title">DECIMAL</span><span class="params">(8,2)</span>  // <span class="title">INOUT</span>
)
<span class="title">BEGIN</span> 
    <span class="title">SELECT</span> <span class="title">Min</span><span class="params">(prod_price)</span> <span class="title">INTO</span> <span class="title">pl</span> <span class="title">FROM</span> <span class="title">products</span>;</span>
    <span class="keyword">SELECT</span> Max(prod_price) <span class="keyword">INTO</span> ph <span class="keyword">FROM</span> products;
    <span class="keyword">SELECT</span> Avg(prod_price) <span class="keyword">INTO</span> pa <span class="keyword">FROM</span> products;
<span class="keyword">END</span>;

CALL product_pricing(@price_low,@price_high,@price_avergae);<span class="comment">// 不输出</span>
<span class="keyword">SELECT</span> @price_low,@price_high,@price_avergae;

<span class="comment">// ordertotal 接受订单号并返回该订单的合计</span>
<span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">order_total</span><span class="params">(
    <span class="keyword">IN</span>  onumber INT, // <span class="keyword">IN</span> 传入
    <span class="keyword">OUT</span> ototal DECIMAL(8,2)</span>, // <span class="title">OUT</span> 传出
)
<span class="title">BEGIN</span> 
    <span class="title">SELECT</span> <span class="title">Sum</span><span class="params">(itme_price * quantity)</span> 
    <span class="title">FROM</span> <span class="title">orderitems</span>
    <span class="title">WHERE</span> <span class="title">order_num</span> = <span class="title">onumber</span> <span class="title">INTO</span> <span class="title">ototal</span>;</span>
<span class="keyword">END</span>;

CALL order_total(<span class="number">20005</span>,@total);
<span class="keyword">SELECT</span>  @total;
</pre></td></tr></table></figure>

<p>只有在存储过程中包含业务规则和智能处理时，其威力才会显示出来</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="code"><pre>-- Name: order_total
-- Parameters: onumber = <span class="keyword">order</span> number
--             taxable = <span class="number">0</span> <span class="keyword">if</span> <span class="keyword">not</span> taxable, <span class="number">1</span> <span class="keyword">if</span> taxable
--             ototal  = <span class="keyword">order</span> total variable

<span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">order_total</span><span class="params">(
    <span class="keyword">IN</span>  onumber INT, // <span class="keyword">IN</span> 传入
    <span class="keyword">IN</span>  taxable INT,
    <span class="keyword">OUT</span> ototal DECIMAL(8,2)</span>, // <span class="title">OUT</span> 传出
) <span class="title">COMMENT</span> '<span class="title">Obtain</span> <span class="title">order</span> <span class="title">total</span>, <span class="title">optionally</span> <span class="title">adding</span> <span class="title">tax</span>'

<span class="title">BEGIN</span> 
    
    -- <span class="title">Declare</span> <span class="title">variable</span> <span class="title">for</span> <span class="title">total</span>
    <span class="title">DECLARE</span> <span class="title">total</span> <span class="title">DECIMAL</span><span class="params">(8,2)</span>;</span>
    -- Declare tax percentge
    DECLARE texrate INT <span class="keyword">DEFAULT</span> <span class="number">6</span>;
    
    -- Get the <span class="keyword">order</span> total
    <span class="keyword">SELECT</span> Sum(itme_price * quantity) 
    <span class="keyword">FROM</span> orderitems
    <span class="keyword">WHERE</span> order_num = onumber <span class="keyword">INTO</span> total;
    
    -- <span class="keyword">Is</span> this taxable?
    <span class="keyword">IF</span> taxable <span class="keyword">THEN</span>
        <span class="keyword">SELECT</span> total+(total/<span class="number">100</span>*taxrate) <span class="keyword">INTO</span> total;
    <span class="keyword">END</span> <span class="keyword">IF</span>;
    
    <span class="keyword">SELECT</span> total <span class="keyword">INTO</span> ototal; 
<span class="keyword">END</span>;

CALL order_total(<span class="number">20005</span>,<span class="number">0</span>,@total);
<span class="keyword">SELECT</span>  @total;
SHOW <span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span>  <span class="title">order_total</span>;</span>
</pre></td></tr></table></figure>


<h3 id="使用游标">使用游标</h3>
<p>需要在检索出来的行中 前进或后退一行或多行。它不是一条语句，而是该语句检索出来的结果。<br>主要用于交互式应用，可以滚动屏幕上的数据，并对数据进行浏览或修改。        </p>
<p>先声明，SELECT 语句检索，再关闭。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">processorders</span><span class="params">()</span>
<span class="title">BEGIN</span>
    <span class="title">DECLARE</span> <span class="title">ordernumbers</span> <span class="title">CURSOR</span>
    <span class="title">FOR</span> 
    <span class="title">SELECT</span> <span class="title">order_num</span> <span class="title">FROM</span> <span class="title">orders</span>;</span>
<span class="keyword">END</span>;

<span class="comment">//打开 </span>
OPEN ordernumbers;
CLOSE ordernumbers;
</pre></td></tr></table></figure>


<h3 id="数据库管理">数据库管理</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>mysql <span class="attribute">-u</span> root <span class="attribute">-p</span>
</pre></td></tr></table></figure>

<h3 id="数据库维护">数据库维护</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>ANALYZE <span class="keyword">TABLE</span> orders;
CHECK <span class="keyword">TABLE</span> orders,order_items;

source creat.sql
</pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/06/17/mysql/" data-id="20jm4ppgcke2rshw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mysql/">Mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/06/20/data_analysis_python/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Data Analysis with Python (Useful Tips)
        
      </div>
    </a>
  
  
    <a href="/2014/05/18/2014-05-18-data-preparation/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Making sense of data[^1]</div>
    </a>
  
</nav>

  
</article>

<!-- DISQUS

-->


  <section id="comments">
  <!-- Duoshuo Comment BEGIN -->
  <div class="ds-thread"></div>
  <script type="text/javascript">
  var duoshuoQuery = {short_name:"buttonwood"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
  <!-- Duoshuo Comment END -->
</section>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
    <h3 class="widget-title">About</h3>
    <div class="widget">
    <img src="http://ww1.sinaimg.cn/mw690/6fbc15dcjw1do9bywpfjjj.jpg" style="margin: auto; width: 100%;"/>
        <h4 style="text-align: center"><strong>Buttonwood(th)</strong></h4>
        <div style="margin: auto; text-align: center;">
            <a href="http://weibo.com/buttonwood" target="_blank"><img src="http://www.sinaimg.cn/blog/developer/wiki/LOGO_64x64.png" style="border:0;width:32px;height:32px;"/></a>
            <a href="https://github.com/Buttonwood" target="_blank"><img src="https://assets-cdn.github.com/images/modules/logos_page/Octocat.png" style="border:0;width:32px;height:32px;"/></a>
            <a class="fancybox" href="mailto:tanhao2013@gmail.com"><img src="http://icons.iconarchive.com/icons/mcdo-design/letter/64/Letter-GMail-pen-icon.png" style="border:0;width:32px;height:32px;"/></a>
            <a href="http://www.douban.com/people/buttonwood/" target="_blank"><img src="http://img3.douban.com/pics/douban-icons/favicon_32x32.png" style="border:0;width:32px;height:32px;"/></a>
        </div>
    </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Bioinformatics/">Bioinformatics</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Bioinformatics/ML/">ML</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Compute/">Compute</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Mining/">Data Mining</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Visualization/">Data Visualization</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/R/">R</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tips/">Tips</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Annotation/">Annotation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assemble/">Assemble</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bayesian/">Bayesian</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CART/">CART</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Circos/">Circos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Comparative-genomics/">Comparative genomics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DBG/">DBG</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DV/">DV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EM/">EM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/">ElasticSearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Genome/">Genome</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kmer/">Kmer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCMC/">MCMC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ML/">ML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/">Mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OLC/">OLC</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSX/">OSX</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Octopress/">Octopress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PacBio/">PacBio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PageRank/">PageRank</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/">R</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SVM/">SVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scaffold/">Scaffold</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Synteny/">Synteny</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/">Thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tips/">Tips</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/books/">books</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centOS/">centOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/classification/">classification</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clustering/">clustering</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cobar/">cobar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/consul/">consul</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/">hbase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k-means/">k-means</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kNN/">kNN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matplotlib/">matplotlib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/people/">people</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/registry/">registry</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sysbench/">sysbench</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Annotation/" style="font-size: 10.00px;">Annotation</a><a href="/tags/Assemble/" style="font-size: 12.00px;">Assemble</a><a href="/tags/Assembly/" style="font-size: 10.00px;">Assembly</a><a href="/tags/Bayesian/" style="font-size: 10.00px;">Bayesian</a><a href="/tags/Blog/" style="font-size: 10.00px;">Blog</a><a href="/tags/CART/" style="font-size: 10.00px;">CART</a><a href="/tags/Circos/" style="font-size: 10.00px;">Circos</a><a href="/tags/Comparative-genomics/" style="font-size: 10.00px;">Comparative genomics</a><a href="/tags/DBG/" style="font-size: 14.00px;">DBG</a><a href="/tags/DV/" style="font-size: 10.00px;">DV</a><a href="/tags/EM/" style="font-size: 10.00px;">EM</a><a href="/tags/ElasticSearch/" style="font-size: 10.00px;">ElasticSearch</a><a href="/tags/Genome/" style="font-size: 12.00px;">Genome</a><a href="/tags/Git/" style="font-size: 10.00px;">Git</a><a href="/tags/Kmer/" style="font-size: 10.00px;">Kmer</a><a href="/tags/MCMC/" style="font-size: 10.00px;">MCMC</a><a href="/tags/ML/" style="font-size: 12.00px;">ML</a><a href="/tags/MySQL/" style="font-size: 16.00px;">MySQL</a><a href="/tags/Mysql/" style="font-size: 10.00px;">Mysql</a><a href="/tags/OLC/" style="font-size: 14.00px;">OLC</a><a href="/tags/OSX/" style="font-size: 10.00px;">OSX</a><a href="/tags/Octopress/" style="font-size: 10.00px;">Octopress</a><a href="/tags/PacBio/" style="font-size: 10.00px;">PacBio</a><a href="/tags/PageRank/" style="font-size: 10.00px;">PageRank</a><a href="/tags/Python/" style="font-size: 20.00px;">Python</a><a href="/tags/R/" style="font-size: 14.00px;">R</a><a href="/tags/SVM/" style="font-size: 10.00px;">SVM</a><a href="/tags/Scaffold/" style="font-size: 10.00px;">Scaffold</a><a href="/tags/Synteny/" style="font-size: 10.00px;">Synteny</a><a href="/tags/Thread/" style="font-size: 10.00px;">Thread</a><a href="/tags/Tips/" style="font-size: 20.00px;">Tips</a><a href="/tags/Tools/" style="font-size: 20.00px;">Tools</a><a href="/tags/Web/" style="font-size: 10.00px;">Web</a><a href="/tags/books/" style="font-size: 10.00px;">books</a><a href="/tags/centOS/" style="font-size: 10.00px;">centOS</a><a href="/tags/classification/" style="font-size: 10.00px;">classification</a><a href="/tags/clustering/" style="font-size: 10.00px;">clustering</a><a href="/tags/cobar/" style="font-size: 10.00px;">cobar</a><a href="/tags/consul/" style="font-size: 10.00px;">consul</a><a href="/tags/docker/" style="font-size: 18.00px;">docker</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03">March 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01">January 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12">December 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06">June 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">May 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04">April 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02">February 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12">December 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11">November 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08">August 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03">March 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01">January 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12">December 2012</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/03/31/2016-03-31-hadoop-ha-docker/">docker搭建高可用hadoop集群</a>
          </li>
        
          <li>
            <a href="/2016/03/31/2016-03-31-hbase-region-in-transition/">hbase region in transition too long</a>
          </li>
        
          <li>
            <a href="/2016/03/15/2016-03-15-zookeeper-and-docker/">用docker创建zookeeper集群</a>
          </li>
        
          <li>
            <a href="/2016/03/10/2016-03-10-docker-consul/">docker consul 服务发现</a>
          </li>
        
          <li>
            <a href="/2016/03/10/2016-03-10-docker-registry/">docker registry 搭建</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1874597340&verifier=b3593ceb&dpc=1"></iframe>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 The Eye of Data ( <a href="http://buttonwood.github.io" target="_blank">@Buttonwood )</a><br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    




<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>