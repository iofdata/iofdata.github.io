<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>The Eye of Data (@Buttonwood)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Data Mining and Visualization.">
<meta property="og:type" content="website">
<meta property="og:title" content="The Eye of Data (@Buttonwood)">
<meta property="og:url" content="http://buttonwood.bitbucket.org//">
<meta property="og:site_name" content="The Eye of Data (@Buttonwood)">
<meta property="og:description" content="Data Mining and Visualization.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The Eye of Data (@Buttonwood)">
<meta name="twitter:description" content="Data Mining and Visualization.">
  
    <link rel="alternative" href="/atom.xml" title="The Eye of Data (@Buttonwood)" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">The Eye of Data (@Buttonwood)</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Float like a butterfly! Stand like a buttonwood!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://buttonwood.bitbucket.org/"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Writing-idiomatic-python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/14/Writing-idiomatic-python/" class="article-date">
  <time datetime="2015-01-14T11:43:00.000Z" itemprop="datePublished">Jan 14 2015</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/14/Writing-idiomatic-python/">Writing idiomatic python</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_if_Statements">1.  <code>if</code> Statements</h3>
<h4 id="1-1-_Chain_comparisons_to_make_if_statements_more_concise">1.1. Chain comparisons to make <code>if</code> statements more concise</h4>
<p>Don’t:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">if</span> x &lt;= y <span class="keyword">and</span> y &lt;= <span class="symbol">z:</span>
    <span class="keyword">return</span> <span class="constant">Ture</span>
</pre></td></tr></table></figure>

<p>Do:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">if</span> <span class="number">1</span> &lt; x &lt; <span class="number">6</span>:
    <span class="built_in">print</span> <span class="string">'python'</span>
</pre></td></tr></table></figure>

<h4 id="1-2-_Avoid_placing_conditional_branch_code_on_the_same_line_as_the_colon">1.2. Avoid placing conditional branch code on the same line as the colon</h4>
<p>Don’t:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>name = <span class="string">'Tom'</span>
address = <span class="string">"NY"</span>
<span class="keyword">if</span> name: <span class="built_in">print</span>(name)
<span class="built_in">print</span>(address)
</pre></td></tr></table></figure>

<p>Do:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>name = <span class="string">'Tom'</span>
address = <span class="string">"NY"</span>
<span class="keyword">if</span> name:
    <span class="built_in">print</span>(name)
<span class="built_in">print</span>(address)
</pre></td></tr></table></figure>

<h4 id="1-3-_Avoid_repeating_variable_name_in_compound_if_statement">1.3. Avoid repeating variable name in compound <code>if</code> statement</h4>
<p>Don’t:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>is_generic_name=<span class="keyword">False</span>
name=<span class="string">'Tom'</span>
<span class="keyword">if</span> name==<span class="string">'Tom'</span> <span class="keyword">or</span> name==<span class="string">'Dick'</span> <span class="keyword">or</span> name==<span class="string">'Harry'</span>:
    is_generic_name=<span class="keyword">True</span>
</pre></td></tr></table></figure>

<p>Do:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>name=<span class="string">'Tom'</span>
is_generic_name = name <span class="keyword">in</span> (<span class="string">'Tom'</span>,<span class="string">'Dick'</span>,<span class="string">'Harry'</span>)
</pre></td></tr></table></figure>

<h4 id="1-4-_Avoid_comparing_directly_to_True,False,or_None">1.4. Avoid comparing directly to <code>True</code>,<code>False</code>,or <code>None</code></h4>
<p>All of the following are considered <code>False</code><br>•<code>None</code><br>•<code>False</code><br>•zero for numeric types<br>•empty sequences<br>•empty dictionaries<br>•a value of <code>0</code> or <code>False</code> returned when either <code>__len__</code> or <code>__nonzero__</code> is called</p>
<p>Don’t</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">if</span> foo == <span class="keyword">True</span>:
    <span class="keyword">pass</span>
</pre></td></tr></table></figure>

<p>Do:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">if</span> foo:
    <span class="keyword">pass</span>

<span class="function"><span class="keyword">def</span> <span class="title">insert_value</span><span class="params">(value,position=None)</span>:</span>
    <span class="keyword">if</span> position <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:
        <span class="keyword">pass</span>
</pre></td></tr></table></figure>

<h4 id="1-5-_Use_if_and_else_as_a_short_ternary_operator_replacement(三元运算符_?_:)">1.5. Use if and else as a short ternary operator replacement(三元运算符 <code>? :</code>)</h4>
<p>Don’t:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>foo = True
<span class="keyword">value</span> = <span class="number">0</span>
<span class="keyword">if</span> foo:
    <span class="keyword">value</span> = <span class="number">1</span>
print(<span class="keyword">value</span>)
</pre></td></tr></table></figure>

<p>Do:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>foo = True
<span class="keyword">value</span> = <span class="number">1</span> <span class="keyword">if</span> foo <span class="keyword">else</span> <span class="number">0</span>
print(<span class="keyword">value</span>)
</pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2015/01/14/Writing-idiomatic-python/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2015/01/14/Writing-idiomatic-python/" data-id="0wgsn5vtgdg7drlp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tips/">Tips</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20141215-rChart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/15/20141215-rChart/" class="article-date">
  <time datetime="2014-12-15T03:51:00.000Z" itemprop="datePublished">Dec 15 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tools/">Tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/15/20141215-rChart/">rChart and morris.js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_Using_rChart_and_morris-js_for_time_series_visualization">1. Using <code>rChart</code> and <code>morris.js</code> for time series visualization</h3>
<p>Here are the codes!</p>
<pre><code>library(<span class="string">'rCharts'</span>, <span class="string">'ramnathv'</span>)
df &lt;- <span class="built_in">read</span>.csv(<span class="string">"type.1h.csv"</span>,header=<span class="constant">FALSE</span>,stringsAsFactors=<span class="constant">FALSE</span>)
colnames(df) &lt;- c(<span class="string">"date"</span>,<span class="string">"1"</span>, <span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"4"</span>,<span class="string">"5"</span>,<span class="string">"6"</span>,<span class="string">"7"</span>,<span class="string">"8"</span>,<span class="string">"9"</span>,<span class="string">"10"</span>)
transform(df, <span class="built_in">date</span> = <span class="keyword">as</span>.<span class="keyword">character</span>(<span class="built_in">date</span>))
m1 &lt;- mPlot(x = <span class="string">"date"</span>, y = c(<span class="string">"1"</span>, <span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"4"</span>,<span class="string">"5"</span>,<span class="string">"6"</span>,<span class="string">"7"</span>,<span class="string">"8"</span>,<span class="string">"9"</span>,<span class="string">"10"</span>), type = <span class="string">"Line"</span>, data = df)
m1$<span class="built_in">set</span>(pointSize = <span class="number">0</span>, lineWidth = <span class="number">1</span>)
m1$print(<span class="string">"chart2"</span>)
m1
<span class="comment">#base64enc</span>
<span class="comment"># install.packages("base64enc")</span>
library(<span class="string">"base64enc"</span>)
m1$save(<span class="string">'graph1.html'</span>, <span class="string">'inline'</span>, cdn=<span class="constant">TRUE</span>)
<span class="comment">#m1$save('graph1.html', 'inline', standalone=TRUE)</span>
</code></pre><h4 id="2-_Graph">2. Graph</h4>
<p>Here, we can see this is a test graph!</p>
<p><a href="../../../../fish/graph1.html">graph1.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/12/15/20141215-rChart/" data-id="yanz9ensxy6ertpt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-python_pocker_reference" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/10/python_pocker_reference/" class="article-date">
  <time datetime="2014-10-10T07:43:00.000Z" itemprop="datePublished">Oct 10 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/10/python_pocker_reference/">Python Pocket Reference</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/10/10/python_pocker_reference/" data-id="j6f9pco9qi5qxb18" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tips/">Tips</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20140725-sysbench-mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/25/20140725-sysbench-mysql/" class="article-date">
  <time datetime="2014-07-25T15:51:00.000Z" itemprop="datePublished">Jul 25 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/25/20140725-sysbench-mysql/">Sysbench for MySQL Testing</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-_For_whole_testing_scripts">1. For whole testing scripts</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="code"><pre>host<span class="subst">=</span>localhost
port<span class="subst">=</span><span class="number">3306</span>
socket<span class="subst">=</span>/home/<span class="built_in">data</span>/mysql/mysql<span class="built_in">.</span>sock
user<span class="subst">=</span>root
password<span class="subst">=</span><span class="number">123456</span>

resultsdir<span class="subst">=</span><span class="built_in">.</span>/results<span class="attribute">-thread</span>

threads<span class="subst">=</span><span class="string">"8 16 32 64 128"</span>

sizes<span class="subst">=</span><span class="string">"1000000 5000000 10000000 15000000 20000000 25000000 30000000"</span>


printf <span class="string">"sizes,threads,transactions,trns p/s,deadlocks,dls p/s,read/write requests,r/w reqs p/s,min,avg,max,99 percentile \n"</span> <span class="subst">&gt;&gt;</span> stat<span class="built_in">.</span>txt

mkdir <span class="attribute">-p</span> <span class="variable">$resultsdir</span>

for <span class="keyword">thread</span> <span class="keyword">in</span> <span class="variable">$threads</span>;<span class="keyword">do</span>
    mkdir <span class="variable">$resultsdir</span>/<span class="keyword">thread</span><span class="subst">-</span><span class="variable">$thread</span>
    for size <span class="keyword">in</span> <span class="variable">$sizes</span>; <span class="keyword">do</span>
        sysbench <span class="subst">--</span>test<span class="subst">=</span>oltp <span class="subst">--</span>mysql<span class="attribute">-table</span><span class="attribute">-engine</span><span class="subst">=</span>innodb <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-size</span><span class="subst">=</span><span class="variable">$size</span>  <span class="subst">--</span>mysql<span class="attribute">-socket</span><span class="subst">=</span><span class="variable">$socket</span> <span class="subst">--</span>mysql<span class="attribute">-user</span><span class="subst">=</span><span class="variable">$user</span> <span class="subst">--</span>mysql<span class="attribute">-host</span><span class="subst">=</span><span class="variable">$host</span> <span class="subst">--</span>mysql<span class="attribute">-password</span><span class="subst">=</span><span class="variable">$password</span> <span class="subst">--</span>mysql<span class="attribute">-db</span><span class="subst">=</span>students <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-name</span><span class="subst">=</span>test<span class="variable">$size</span> prepare;
        sysbench <span class="subst">--</span>test<span class="subst">=</span>oltp <span class="subst">--</span>mysql<span class="attribute">-table</span><span class="attribute">-engine</span><span class="subst">=</span>innodb <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-size</span><span class="subst">=</span><span class="variable">$size</span> <span class="subst">--</span>mysql<span class="attribute">-socket</span><span class="subst">=</span><span class="variable">$socket</span> <span class="subst">--</span>mysql<span class="attribute">-user</span><span class="subst">=</span><span class="variable">$user</span> <span class="subst">--</span>mysql<span class="attribute">-host</span><span class="subst">=</span><span class="variable">$host</span> <span class="subst">--</span>mysql<span class="attribute">-password</span><span class="subst">=</span><span class="variable">$password</span> <span class="subst">--</span>mysql<span class="attribute">-db</span><span class="subst">=</span>students <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-name</span><span class="subst">=</span>test<span class="variable">$size</span>  <span class="subst">--</span><span class="keyword">max</span><span class="attribute">-requests</span><span class="subst">=</span><span class="number">1000</span> <span class="subst">--</span>num<span class="attribute">-threads</span><span class="subst">=</span><span class="variable">$thread</span> run <span class="subst">|</span> tee <span class="attribute">-a</span> <span class="variable">$resultsdir</span>/<span class="keyword">thread</span><span class="subst">-</span><span class="variable">$thread</span>/sysbench<span class="built_in">.</span><span class="variable">$thread.</span><span class="variable">$size.report</span>;
        sysbench <span class="subst">--</span>test<span class="subst">=</span>oltp <span class="subst">--</span>mysql<span class="attribute">-host</span><span class="subst">=</span><span class="variable">$host</span>  <span class="subst">--</span>mysql<span class="attribute">-user</span><span class="subst">=</span><span class="variable">$user</span> <span class="subst">--</span>mysql<span class="attribute">-password</span><span class="subst">=</span><span class="variable">$password</span> <span class="subst">--</span>mysql<span class="attribute">-socket</span><span class="subst">=</span><span class="variable">$socket</span> <span class="subst">--</span>mysql<span class="attribute">-db</span><span class="subst">=</span>students <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-name</span><span class="subst">=</span>test<span class="variable">$size</span>  cleanup;
        
        cat <span class="variable">$resultsdir</span>/<span class="keyword">thread</span><span class="subst">-</span><span class="variable">$thread</span>/sysbench<span class="built_in">.</span><span class="variable">$thread.</span><span class="variable">$size.report</span> <span class="subst">|</span> <span class="subst">\</span>
  		egrep <span class="string">" cat|threads:|transactions:|deadlocks|read/write|min:|avg:|max:|percentile:"</span> <span class="subst">|</span> <span class="subst">\</span>
	 	sed  <span class="attribute">-e</span> <span class="string">'1 s/Number of threads: //'</span> <span class="subst">|</span> <span class="subst">\</span>
	 	tr <span class="attribute">-d</span> <span class="string">"\n"</span> <span class="subst">|</span> <span class="subst">\</span>
	 	sed <span class="attribute">-e</span> <span class="string">'s/Number of threads: /\n/g'</span> <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/[A-Za-z\/]\{1,\}://g'</span> <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/read\/write//g'</span> <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/approx\.  95//g'</span> <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/per sec.)//g'</span> <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/ms//g'</span> <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/(//g'</span>  <span class="subst">\</span>
	 	<span class="attribute">-e</span> <span class="string">'s/  */,/g'</span> <span class="subst">|</span> awk <span class="attribute">-v</span> d<span class="subst">=</span><span class="variable">$size</span> <span class="string">'{$0=d","$0}1'</span> <span class="subst">&gt;&gt;</span> stat<span class="built_in">.</span>txt
    done
done
</pre></td></tr></table></figure>

<h3 id="2-_Results">2. Results</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="code"><pre>SIZES,THREADS,TRANSACTIONS,TRNS P/S,DEADLOCKS,DLS P/S,READ/WRITE REQUESTS,R/W REQS P/S,<span class="keyword">MIN</span>,AVG,<span class="keyword">MAX</span>,<span class="number">99</span> PERCENTILE
<span class="number">1000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">236.13</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4486.45</span>,<span class="number">7.16</span>,<span class="number">33.66</span>,<span class="number">118.17</span>,<span class="number">59.32</span>
<span class="number">5000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">265.81</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">5050.47</span>,<span class="number">6.35</span>,<span class="number">29.99</span>,<span class="number">99.14</span>,<span class="number">46.96</span>
<span class="number">10000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">379.46</span>,<span class="number">127</span>,<span class="number">48.19</span>,<span class="number">21413</span>,<span class="number">8125.43</span>,<span class="number">3.54</span>,<span class="number">21.01</span>,<span class="number">306.08</span>,<span class="number">34.70</span>
<span class="number">15000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">202.33</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3844.31</span>,<span class="number">8.76</span>,<span class="number">39.36</span>,<span class="number">113.15</span>,<span class="number">62.77</span>
<span class="number">20000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">185.34</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3521.38</span>,<span class="number">10.48</span>,<span class="number">43.05</span>,<span class="number">111.56</span>,<span class="number">66.92</span>
<span class="number">25000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">171.11</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3251.01</span>,<span class="number">7.46</span>,<span class="number">46.69</span>,<span class="number">506.47</span>,<span class="number">74.60</span>
<span class="number">30000000</span>,<span class="number">8</span>,<span class="number">1000</span>,<span class="number">163.24</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3101.55</span>,<span class="number">14.49</span>,<span class="number">48.91</span>,<span class="number">504.90</span>,<span class="number">77.21</span>
<span class="number">1000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">288.82</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">5487.51</span>,<span class="number">7.82</span>,<span class="number">54.95</span>,<span class="number">168.84</span>,<span class="number">89.33</span>
<span class="number">5000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">270.04</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">5130.82</span>,<span class="number">19.13</span>,<span class="number">59.02</span>,<span class="number">323.48</span>,<span class="number">92.27</span>
<span class="number">10000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">231.99</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4407.90</span>,<span class="number">5.73</span>,<span class="number">68.45</span>,<span class="number">329.40</span>,<span class="number">112.02</span>
<span class="number">15000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">230.78</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4384.76</span>,<span class="number">8.29</span>,<span class="number">69.03</span>,<span class="number">233.97</span>,<span class="number">124.21</span>
<span class="number">20000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">170.32</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3236.17</span>,<span class="number">9.48</span>,<span class="number">93.60</span>,<span class="number">799.09</span>,<span class="number">158.71</span>
<span class="number">25000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">164.44</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3124.34</span>,<span class="number">5.68</span>,<span class="number">96.44</span>,<span class="number">633.64</span>,<span class="number">165.06</span>
<span class="number">30000000</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="number">174.87</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3322.48</span>,<span class="number">9.50</span>,<span class="number">90.89</span>,<span class="number">520.92</span>,<span class="number">151.65</span>
<span class="number">1000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">316.29</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">6009.43</span>,<span class="number">7.72</span>,<span class="number">99.23</span>,<span class="number">346.24</span>,<span class="number">172.95</span>
<span class="number">5000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">248.03</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4712.60</span>,<span class="number">23.21</span>,<span class="number">125.06</span>,<span class="number">383.60</span>,<span class="number">208.35</span>
<span class="number">10000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">229.40</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4358.52</span>,<span class="number">5.39</span>,<span class="number">138.82</span>,<span class="number">598.64</span>,<span class="number">350.74</span>
<span class="number">15000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">211.46</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4017.80</span>,<span class="number">13.27</span>,<span class="number">150.13</span>,<span class="number">501.56</span>,<span class="number">284.44</span>
<span class="number">20000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">198.36</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3768.77</span>,<span class="number">8.54</span>,<span class="number">159.58</span>,<span class="number">822.41</span>,<span class="number">252.87</span>
<span class="number">25000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">181.85</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3455.19</span>,<span class="number">21.85</span>,<span class="number">174.35</span>,<span class="number">891.91</span>,<span class="number">271.78</span>
<span class="number">30000000</span>,<span class="number">32</span>,<span class="number">1000</span>,<span class="number">156.00</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">2964.03</span>,<span class="number">9.45</span>,<span class="number">204.21</span>,<span class="number">811.06</span>,<span class="number">339.07</span>
<span class="number">1000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">311.37</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">5916.07</span>,<span class="number">19.86</span>,<span class="number">198.48</span>,<span class="number">562.27</span>,<span class="number">369.82</span>
<span class="number">5000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">287.12</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">5455.27</span>,<span class="number">29.12</span>,<span class="number">216.80</span>,<span class="number">843.55</span>,<span class="number">338.67</span>
<span class="number">10000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">222.90</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4235.16</span>,<span class="number">13.82</span>,<span class="number">285.81</span>,<span class="number">975.70</span>,<span class="number">773.48</span>
<span class="number">15000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">193.57</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3677.74</span>,<span class="number">12.19</span>,<span class="number">327.30</span>,<span class="number">1143.78</span>,<span class="number">846.66</span>
<span class="number">20000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">170.73</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3243.88</span>,<span class="number">55.67</span>,<span class="number">370.57</span>,<span class="number">1217.91</span>,<span class="number">1092.95</span>
<span class="number">25000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">157.72</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">2996.74</span>,<span class="number">11.59</span>,<span class="number">401.83</span>,<span class="number">1680.79</span>,<span class="number">1306.81</span>
<span class="number">30000000</span>,<span class="number">64</span>,<span class="number">1000</span>,<span class="number">158.19</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3005.66</span>,<span class="number">19.20</span>,<span class="number">401.41</span>,<span class="number">1304.60</span>,<span class="number">1107.11</span>
<span class="number">1000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">302.16</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">5741.04</span>,<span class="number">52.05</span>,<span class="number">408.05</span>,<span class="number">1041.78</span>,<span class="number">772.32</span>
<span class="number">5000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">251.01</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">4769.20</span>,<span class="number">26.99</span>,<span class="number">489.92</span>,<span class="number">1724.37</span>,<span class="number">781.39</span>
<span class="number">10000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">207.77</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">3947.55</span>,<span class="number">102.64</span>,<span class="number">604.39</span>,<span class="number">1577.85</span>,<span class="number">1285.85</span>
<span class="number">15000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">149.60</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">2842.35</span>,<span class="number">146.68</span>,<span class="number">841.09</span>,<span class="number">3348.05</span>,<span class="number">2764.42</span>
<span class="number">20000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">145.41</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">2762.83</span>,<span class="number">132.31</span>,<span class="number">865.04</span>,<span class="number">3247.91</span>,<span class="number">2620.98</span>
<span class="number">25000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">139.95</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">2658.97</span>,<span class="number">252.97</span>,<span class="number">896.25</span>,<span class="number">2942.05</span>,<span class="number">2773.54</span>
<span class="number">30000000</span>,<span class="number">128</span>,<span class="number">1000</span>,<span class="number">115.80</span>,<span class="number">0</span>,<span class="number">0.00</span>,<span class="number">19000</span>,<span class="number">2200.18</span>,<span class="number">221.51</span>,<span class="number">1089.31</span>,<span class="number">4408.08</span>,<span class="number">4141.01</span>
</pre></td></tr></table></figure>

<h3 id="3-_Visulization">3. Visulization</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="title">library</span><span class="params">(<span class="string">"ggplot2"</span>)</span>
<span class="title">df</span> &lt;- <span class="title">read</span>.<span class="title">csv</span><span class="params">(<span class="string">"C:\\Users\\tanhao\\Documents\\GitHub\\DM\\mysql\\work\\stat.csv"</span>,head=<span class="variable">TRUE</span>)</span>
<span class="title">ggplot</span><span class="params">(df, <span class="function_name">aes</span>(x = <span class="function_name">factor</span>(sizes), y = trns.p.s, fill=<span class="function_name">factor</span>(threads)))</span> + <span class="title">geom_bar</span><span class="params">(stat = <span class="string">"identity"</span>, position=<span class="string">"dodge"</span>)</span></span>
</pre></td></tr></table></figure>

<p><img src="https://cloud.githubusercontent.com/assets/1680943/3700027/1d8dea4a-13db-11e4-9043-31028496d885.png" alt="image"></p>
<p>以上数据为一台1核1G主机的性能测试结果.</p>
<p>欢迎参见<a href="https://github.com/iofdata/DM/issues/5" target="_blank" rel="external">Details</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/07/25/20140725-sysbench-mysql/" data-id="jllh370hfmqfqags" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sysbench/">sysbench</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20140724-sysbench-testing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/24/20140724-sysbench-testing/" class="article-date">
  <time datetime="2014-07-24T15:51:00.000Z" itemprop="datePublished">Jul 24 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/24/20140724-sysbench-testing/">sysbench testing</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="sysbench_测试">sysbench 测试</h3>
<h4 id="1_cpu_性能测试">1 cpu 性能测试</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">sysbench</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">test=cpu</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">cpu</span><span class="literal">-</span><span class="comment">max</span><span class="literal">-</span><span class="comment">prime=20000</span> <span class="comment">run</span>
</pre></td></tr></table></figure><br>cpu测试主要是进行素数的加法运算，在上面的例子中，<br>指定了最大的素数为 20000，自己可以根据机器cpu的性能来适当调整数值。<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded <span class="keyword">system</span> evaluation benchmark

Running <span class="operator">the</span> test <span class="operator">with</span> following options:
Number <span class="operator">of</span> threads: <span class="number">1</span>

Doing CPU performance benchmark

Threads started!

Done.

Maximum prime <span class="built_in">number</span> checked <span class="operator">in</span> CPU test: <span class="number">20000</span>


Test execution summary:
    total <span class="built_in">time</span>:                          <span class="number">30.5083</span>s
    total <span class="built_in">number</span> <span class="operator">of</span> events:              <span class="number">10000</span>
    total <span class="built_in">time</span> taken <span class="keyword">by</span> event execution: <span class="number">30.5043</span>
    per-request statistics:
         <span class="built_in">min</span>:                                  <span class="number">2.83</span>ms
         <span class="built_in">avg</span>:                                  <span class="number">3.05</span>ms
         <span class="built_in">max</span>:                                  <span class="number">6.46</span>ms
         approx.  <span class="number">95</span> percentile:               <span class="number">3.48</span>ms

Threads fairness:
    events (<span class="built_in">avg</span>/stddev):           <span class="number">10000.0000</span>/<span class="number">0.00</span>
    execution <span class="built_in">time</span> (<span class="built_in">avg</span>/stddev):   <span class="number">30.5043</span>/<span class="number">0.00</span>
</pre></td></tr></table></figure>

<h4 id="2_线程测试">2 线程测试</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>sysbench <span class="subst">--</span>test<span class="subst">=</span>threads <span class="subst">--</span>num<span class="attribute">-threads</span><span class="subst">=</span><span class="number">64</span> <span class="subst">--</span><span class="keyword">thread</span><span class="attribute">-yields</span><span class="subst">=</span><span class="number">100</span> <span class="subst">--</span><span class="keyword">thread</span><span class="attribute">-locks</span><span class="subst">=</span><span class="number">2</span> run
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded <span class="keyword">system</span> evaluation benchmark

Running <span class="operator">the</span> test <span class="operator">with</span> following options:
Number <span class="operator">of</span> threads: <span class="number">64</span>

Doing thread subsystem performance test
Thread yields per test: <span class="number">100</span> Locks used: <span class="number">2</span>
Threads started!
Done.


Test execution summary:
    total <span class="built_in">time</span>:                          <span class="number">0.6215</span>s
    total <span class="built_in">number</span> <span class="operator">of</span> events:              <span class="number">10000</span>
    total <span class="built_in">time</span> taken <span class="keyword">by</span> event execution: <span class="number">39.3849</span>
    per-request statistics:
         <span class="built_in">min</span>:                                  <span class="number">0.04</span>ms
         <span class="built_in">avg</span>:                                  <span class="number">3.94</span>ms
         <span class="built_in">max</span>:                                 <span class="number">85.26</span>ms
         approx.  <span class="number">95</span> percentile:              <span class="number">30.41</span>ms

Threads fairness:
    events (<span class="built_in">avg</span>/stddev):           <span class="number">156.2500</span>/<span class="number">10.52</span>
    execution <span class="built_in">time</span> (<span class="built_in">avg</span>/stddev):   <span class="number">0.6154</span>/<span class="number">0.00</span>
</pre></td></tr></table></figure>

<h4 id="3_磁盘IO性能测试，随机读写和删除">3 磁盘IO性能测试，随机读写和删除</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>sysbench <span class="subst">--</span>test<span class="subst">=</span>fileio <span class="subst">--</span>num<span class="attribute">-threads</span><span class="subst">=</span><span class="number">16</span> <span class="subst">--</span>file<span class="attribute">-total</span><span class="attribute">-size</span><span class="subst">=</span><span class="number">3</span>G <span class="subst">--</span>file<span class="attribute">-test</span><span class="attribute">-mode</span><span class="subst">=</span>rndrw prepare
sysbench <span class="subst">--</span>test<span class="subst">=</span>fileio <span class="subst">--</span>num<span class="attribute">-threads</span><span class="subst">=</span><span class="number">16</span> <span class="subst">--</span>file<span class="attribute">-total</span><span class="attribute">-size</span><span class="subst">=</span><span class="number">3</span>G <span class="subst">--</span>file<span class="attribute">-test</span><span class="attribute">-mode</span><span class="subst">=</span>rndrw run
sysbench <span class="subst">--</span>test<span class="subst">=</span>fileio <span class="subst">--</span>num<span class="attribute">-threads</span><span class="subst">=</span><span class="number">16</span> <span class="subst">--</span>file<span class="attribute">-total</span><span class="attribute">-size</span><span class="subst">=</span><span class="number">3</span>G <span class="subst">--</span>file<span class="attribute">-test</span><span class="attribute">-mode</span><span class="subst">=</span>rndrw cleanup
</pre></td></tr></table></figure><br>上述参数指定了最大创建16个线程，创建的文件总大小为3G，文件读写模式为随机读。<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded <span class="keyword">system</span> evaluation benchmark

Running <span class="operator">the</span> test <span class="operator">with</span> following options:
Number <span class="operator">of</span> threads: <span class="number">64</span>

Doing thread subsystem performance test
Thread yields per test: <span class="number">100</span> Locks used: <span class="number">2</span>
Threads started!
Done.


Test execution summary:
    total <span class="built_in">time</span>:                          <span class="number">0.6215</span>s
    total <span class="built_in">number</span> <span class="operator">of</span> events:              <span class="number">10000</span>
    total <span class="built_in">time</span> taken <span class="keyword">by</span> event execution: <span class="number">39.3849</span>
    per-request statistics:
         <span class="built_in">min</span>:                                  <span class="number">0.04</span>ms
         <span class="built_in">avg</span>:                                  <span class="number">3.94</span>ms
         <span class="built_in">max</span>:                                 <span class="number">85.26</span>ms
         approx.  <span class="number">95</span> percentile:              <span class="number">30.41</span>ms

Threads fairness:
    events (<span class="built_in">avg</span>/stddev):           <span class="number">156.2500</span>/<span class="number">10.52</span>
    execution <span class="built_in">time</span> (<span class="built_in">avg</span>/stddev):   <span class="number">0.6154</span>/<span class="number">0.00</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded <span class="keyword">system</span> evaluation benchmark

Running <span class="operator">the</span> test <span class="operator">with</span> following options:
Number <span class="operator">of</span> threads: <span class="number">16</span>

Extra <span class="built_in">file</span> <span class="built_in">open</span> flags: <span class="number">0</span>
<span class="number">128</span> <span class="built_in">files</span>, <span class="number">24</span>Mb <span class="keyword">each</span>
<span class="number">3</span>Gb total <span class="built_in">file</span> size
Block size <span class="number">16</span>Kb
Number <span class="operator">of</span> <span class="built_in">random</span> requests <span class="keyword">for</span> <span class="built_in">random</span> IO: <span class="number">10000</span>
Read/Write ratio <span class="keyword">for</span> combined <span class="built_in">random</span> IO test: <span class="number">1.50</span>
Periodic FSYNC enabled, calling fsync() <span class="keyword">each</span> <span class="number">100</span> requests.
Calling fsync() <span class="keyword">at</span> <span class="operator">the</span> <span class="function"><span class="keyword">end</span> <span class="title">of</span> <span class="title">test</span>, <span class="title">Enabled</span>.</span>
Using synchronous I/O mode
Doing <span class="built_in">random</span> r/w test
Threads started!
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">3</span> pos: <span class="number">0</span> errno = <span class="number">0</span> (Q?)
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">3</span> pos: <span class="number">6340608</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">13</span> pos: <span class="number">16531456</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">48</span> pos: <span class="number">5537792</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">96</span> pos: <span class="number">8503296</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">26</span> pos: <span class="number">9568256</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">26</span> pos: <span class="number">15794176</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">127</span> pos: <span class="number">18300928</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">9</span> pos: <span class="number">21331968</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">119</span> pos: <span class="number">8421376</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">62</span> pos: <span class="number">17448960</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">87</span> pos: <span class="number">20398080</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">113</span> pos: <span class="number">13156352</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">20</span> pos: <span class="number">10649600</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">17</span> pos: <span class="number">9060352</span> errno = <span class="number">0</span> ()
FATAL: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="built_in">file</span>! <span class="built_in">file</span>: <span class="number">16</span> pos: <span class="number">311296</span> errno = <span class="number">0</span> ()
Done.

Operations performed:  <span class="number">0</span> Read, <span class="number">0</span> Write, <span class="number">0</span> Other = <span class="number">0</span> Total
Read <span class="number">0</span>b  Written <span class="number">0</span>b  Total transferred <span class="number">0</span>b  (<span class="number">0</span>b/<span class="built_in">sec</span>)
    <span class="number">0.00</span> Requests/<span class="built_in">sec</span> executed

Test execution summary:
    total <span class="built_in">time</span>:                          <span class="number">0.0029</span>s
    total <span class="built_in">number</span> <span class="operator">of</span> events:              <span class="number">0</span>
    total <span class="built_in">time</span> taken <span class="keyword">by</span> event execution: <span class="number">0.0000</span>
    per-request statistics:
         <span class="built_in">min</span>:                            <span class="number">18446744073709.55</span>ms
         <span class="built_in">avg</span>:                                  <span class="number">0.00</span>ms
         <span class="built_in">max</span>:                                  <span class="number">0.00</span>ms

Threads fairness:
    events (<span class="built_in">avg</span>/stddev):           <span class="number">0.0000</span>/<span class="number">0.00</span>
    execution <span class="built_in">time</span> (<span class="built_in">avg</span>/stddev):   <span class="number">0.0000</span>/<span class="number">0.00</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded <span class="keyword">system</span> evaluation benchmark

Removing test <span class="built_in">files</span>...
</pre></td></tr></table></figure>

<h4 id="4_内存测试">4 内存测试</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>sysbench --test=<span class="keyword">memory</span> --<span class="keyword">memory</span>-block-<span class="keyword">size</span>=<span class="number">8</span>k --<span class="keyword">memory</span>-total-<span class="keyword">size</span>=<span class="number">4</span>G run
</pre></td></tr></table></figure><br>上述参数指定了本次测试整个过程是在内存中传输 4G 的数据量，每个 block 大小为 8K。<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="preprocessor"># 无结果,待更新!</span>
</pre></td></tr></table></figure>

<h4 id="5_mysql_性能测试">5 mysql 性能测试</h4>
<h5 id="5-1_prepare_data">5.1 prepare data</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>sysbench <span class="subst">--</span>test<span class="subst">=</span>oltp <span class="subst">--</span>mysql<span class="attribute">-table</span><span class="attribute">-engine</span><span class="subst">=</span>innodb <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-size</span><span class="subst">=</span><span class="number">1000000</span> <span class="subst">\</span>
<span class="subst">--</span>mysql<span class="attribute">-socket</span><span class="subst">=</span>/home/<span class="built_in">data</span>/mysql/mysql<span class="built_in">.</span>sock <span class="subst">--</span>mysql<span class="attribute">-user</span><span class="subst">=</span>root <span class="subst">--</span>mysql<span class="attribute">-host</span><span class="subst">=</span>localhost <span class="subst">\</span>
<span class="subst">--</span>mysql<span class="attribute">-password</span><span class="subst">=</span><span class="number">123456</span> <span class="subst">--</span>mysql<span class="attribute">-db</span><span class="subst">=</span>students <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-name</span><span class="subst">=</span>test prepare
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded system evaluation benchmark

No DB drivers specified, using mysql
Creating table <span class="string">'test'</span><span class="keyword">...</span>
Creating <span class="number">1000000</span> records <span class="keyword">in</span> table <span class="string">'test'</span><span class="keyword">...</span>
</pre></td></tr></table></figure>

<h5 id="5-2_run_test">5.2 run test</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>sysbench <span class="subst">--</span>test<span class="subst">=</span>oltp <span class="subst">--</span>mysql<span class="attribute">-table</span><span class="attribute">-engine</span><span class="subst">=</span>innodb <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-size</span><span class="subst">=</span><span class="number">1000000</span> <span class="subst">\</span>
<span class="subst">--</span>mysql<span class="attribute">-socket</span><span class="subst">=</span>/home/<span class="built_in">data</span>/mysql/mysql<span class="built_in">.</span>sock <span class="subst">--</span>mysql<span class="attribute">-user</span><span class="subst">=</span>root <span class="subst">--</span>mysql<span class="attribute">-host</span><span class="subst">=</span>localhost <span class="subst">\</span>
<span class="subst">--</span>mysql<span class="attribute">-password</span><span class="subst">=</span><span class="number">123456</span> <span class="subst">--</span>mysql<span class="attribute">-db</span><span class="subst">=</span>students <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-name</span><span class="subst">=</span>test <span class="subst">\</span>
<span class="subst">--</span><span class="keyword">max</span><span class="attribute">-requests</span><span class="subst">=</span><span class="number">1000</span> <span class="subst">--</span>num<span class="attribute">-threads</span><span class="subst">=</span><span class="number">100</span> run
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre>sysbench <span class="number">0.4</span><span class="number">.10</span>:  multi-threaded <span class="keyword">system</span> evaluation benchmark

No DB drivers specified, <span class="keyword">using</span> mysql
WARNING: Preparing <span class="operator">of</span> <span class="string">"BEGIN"</span> is unsupported, <span class="keyword">using</span> emulation
(<span class="keyword">last</span> message repeated <span class="number">99</span> times)
Running <span class="operator">the</span> test <span class="operator">with</span> following options:
Number <span class="operator">of</span> threads: <span class="number">100</span>

Doing OLTP test.
Running mixed OLTP test
Using Special distribution (<span class="number">12</span> iterations,  <span class="number">1</span> pct <span class="operator">of</span> values are returned <span class="operator">in</span> <span class="number">75</span> pct cases)
Using <span class="string">"BEGIN"</span> <span class="keyword">for</span> starting transactions
Using auto_inc <span class="command"><span class="keyword">on</span> <span class="title">the</span> <span class="title">id</span> <span class="title">column</span></span>
Maximum <span class="built_in">number</span> <span class="operator">of</span> requests <span class="keyword">for</span> OLTP test is limited <span class="built_in">to</span> <span class="number">1000</span>
Threads started!
Done.

OLTP test statistics:
    queries performed:
        <span class="built_in">read</span>:                            <span class="number">14000</span>
        <span class="built_in">write</span>:                           <span class="number">5000</span>
        other:                           <span class="number">2000</span>
        total:                           <span class="number">21000</span>
    transactions:                        <span class="number">1000</span>   (<span class="number">276.21</span> per <span class="built_in">sec</span>.)
    deadlocks:                           <span class="number">0</span>      (<span class="number">0.00</span> per <span class="built_in">sec</span>.)
    <span class="built_in">read</span>/<span class="built_in">write</span> requests:                 <span class="number">19000</span>  (<span class="number">5247.91</span> per <span class="built_in">sec</span>.)
    other operations:                    <span class="number">2000</span>   (<span class="number">552.41</span> per <span class="built_in">sec</span>.)

Test execution summary:
    total <span class="built_in">time</span>:                          <span class="number">3.6205</span>s
    total <span class="built_in">number</span> <span class="operator">of</span> events:              <span class="number">1000</span>
    total <span class="built_in">time</span> taken <span class="keyword">by</span> event execution: <span class="number">356.3231</span>
    per-request statistics:
         <span class="built_in">min</span>:                                 <span class="number">55.01</span>ms
         <span class="built_in">avg</span>:                                <span class="number">356.32</span>ms
         <span class="built_in">max</span>:                               <span class="number">1223.34</span>ms
         approx.  <span class="number">95</span> percentile:             <span class="number">764.73</span>ms

Threads fairness:
    events (<span class="built_in">avg</span>/stddev):           <span class="number">10.0000</span>/<span class="number">0.76</span>
    execution <span class="built_in">time</span> (<span class="built_in">avg</span>/stddev):   <span class="number">3.5632</span>/<span class="number">0.03</span>
</pre></td></tr></table></figure>

<h5 id="5-3_clean_data">5.3 clean data</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>sysbench <span class="subst">--</span>test<span class="subst">=</span>oltp <span class="subst">--</span>mysql<span class="attribute">-host</span><span class="subst">=</span>localhost  <span class="subst">--</span>mysql<span class="attribute">-user</span><span class="subst">=</span>root  <span class="subst">--</span>mysql<span class="attribute">-password</span><span class="subst">=</span><span class="number">123456</span> <span class="subst">\</span>
<span class="subst">--</span>mysql<span class="attribute">-socket</span><span class="subst">=</span>/home/<span class="built_in">data</span>/mysql/mysql<span class="built_in">.</span>sock <span class="subst">--</span>mysql<span class="attribute">-db</span><span class="subst">=</span>students <span class="subst">--</span>oltp<span class="attribute">-table</span><span class="attribute">-name</span><span class="subst">=</span>test cleanup
</pre></td></tr></table></figure>

<p>以上测试内容参考 <a href="http://imysql.cn/node/312" target="_blank" rel="external">MySQL 中文网</a>.</p>
<p>本文数据为一台1核1G主机的性能测试结果.</p>
<p>欢迎参见<a href="https://github.com/iofdata/DM/issues/5" target="_blank" rel="external">Details</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/07/24/20140724-sysbench-testing/" data-id="fdwoyhymftiqu8zm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sysbench/">sysbench</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20140722-sysbench-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/22/20140722-sysbench-install/" class="article-date">
  <time datetime="2014-07-22T13:51:00.000Z" itemprop="datePublished">Jul 22 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/22/20140722-sysbench-install/">sysbench libtool error and mysql testing</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="sysbench_安装">sysbench 安装</h3>
<p><a href="http://blog.163.com/digoal@126/blog/static/16387704020134142151769/" target="_blank" rel="external">http://blog.163.com/digoal@126/blog/static/16387704020134142151769/</a></p>
<h4 id="1_找不到mysql的include和lib文件目录">1 找不到<code>mysql</code>的<code>include</code>和<code>lib</code>文件目录</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>wget -c http://dev<span class="preprocessor">.mysql</span><span class="preprocessor">.com</span>/get/Downloads/MySQL-<span class="number">5.6</span>/MySQL-devel-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>/from/http://mysql<span class="preprocessor">.spd</span><span class="preprocessor">.co</span><span class="preprocessor">.il</span>/
rpm -ivh MySQL-devel-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>

wget -c http://dev<span class="preprocessor">.mysql</span><span class="preprocessor">.com</span>/get/Downloads/MySQL-<span class="number">5.6</span>/MySQL-shared-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>/from/http://mysql<span class="preprocessor">.spd</span><span class="preprocessor">.co</span><span class="preprocessor">.il</span>/
rpm -ivh MySQL-shared-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>

rpm -qa|grep MySQL
rpm -ql MySQL-server-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64

chkconfig --list|grep -i mysql

./configure --with-mysql-includes=/usr/include/mysql --with-mysql-libs=/usr/lib64/mysql/
make
make check
make install
</pre></td></tr></table></figure><br>可惜,仍然不能很好的结果问题,继续艰难摸索中.<br><br>#### 2 最终解决方案<br><br>##### 5-0 版本但是不能测试 <code>oltp</code><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="label">http:</span>//www<span class="preprocessor">.lefred</span><span class="preprocessor">.be</span>/node/<span class="number">154</span>
rpm -ivh sysbench-<span class="number">0.5</span>-<span class="number">2.</span>el6_<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>
rpm -ql sysbench
</pre></td></tr></table></figure>

<h5 id="转回_4-10_版本_解决方案">转回 4.10 版本 解决方案</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="code"><pre>#git clone https://github.com/nettedfish/sysbench_from_percona.git
yum -y install libtool
yum -y install automake*
rm -rf libtool
ln -s /usr/bin/libtool ./

./autogen.sh
./configure
make & make install
ln -s  /usr/local/bin/sysbench /usr/bin/
sysbench --test=oltp help

sysbench 0.4.10:  multi-threaded system evaluation benchmark

oltp options:
  -<span class="ruby">-oltp-test-mode=<span class="constant">STRING</span>         test type to use {simple,complex,nontrx,sp} [complex]
</span>  -<span class="ruby">-oltp-sp-name=<span class="constant">STRING</span>           name of store procedure to call <span class="keyword">in</span> <span class="constant">SP</span> test mode []
</span>  -<span class="ruby">-oltp-read-only=[on|off]       generate only <span class="string">'read'</span> queries (<span class="keyword">do</span> <span class="keyword">not</span> modify database) [off]
</span>  -<span class="ruby">-oltp-skip-trx=[on|off]        skip <span class="constant">BEGIN</span>/<span class="constant">COMMIT</span> statements [off]
</span>  -<span class="ruby">-oltp-range-size=<span class="constant">N</span>             range size <span class="keyword">for</span> range queries [<span class="number">100</span>]
</span>  -<span class="ruby">-oltp-point-selects=<span class="constant">N</span>          number of point selects [<span class="number">10</span>]
</span>  -<span class="ruby">-oltp-simple-ranges=<span class="constant">N</span>          number of simple ranges [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-sum-ranges=<span class="constant">N</span>             number of sum ranges [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-order-ranges=<span class="constant">N</span>           number of ordered ranges [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-distinct-ranges=<span class="constant">N</span>        number of distinct ranges [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-index-updates=<span class="constant">N</span>          number of index update [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-non-index-updates=<span class="constant">N</span>      number of non-index updates [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-nontrx-mode=<span class="constant">STRING</span>       mode <span class="keyword">for</span> non-transactional test {select, update_key, update_nokey, insert, delete} [select]
</span>  -<span class="ruby">-oltp-auto-inc=[on|off]        whether <span class="constant">AUTO_INCREMENT</span> (<span class="keyword">or</span> equivalent) should be used on id column [on]
</span>  -<span class="ruby">-oltp-connect-delay=<span class="constant">N</span>          time <span class="keyword">in</span> microseconds to sleep after connection to database [<span class="number">10000</span>]
</span>  -<span class="ruby">-oltp-user-delay-min=<span class="constant">N</span>         minimum time <span class="keyword">in</span> microseconds to sleep after each request [<span class="number">0</span>]
</span>  -<span class="ruby">-oltp-user-delay-max=<span class="constant">N</span>         maximum time <span class="keyword">in</span> microseconds to sleep after each request [<span class="number">0</span>]
</span>  -<span class="ruby">-oltp-table-name=<span class="constant">STRING</span>        name of test table [sbtest]
</span>  -<span class="ruby">-oltp-table-size=<span class="constant">N</span>             number of records <span class="keyword">in</span> test table [<span class="number">10000</span>]
</span>  -<span class="ruby">-oltp-dist-type=<span class="constant">STRING</span>         random numbers distribution {uniform,gaussian,special} [special]
</span>  -<span class="ruby">-oltp-dist-iter=<span class="constant">N</span>              number of iterations used <span class="keyword">for</span> numbers generation [<span class="number">12</span>]
</span>  -<span class="ruby">-oltp-dist-pct=<span class="constant">N</span>               percentage of values to be treated as <span class="string">'special'</span> (<span class="keyword">for</span> special distribution) [<span class="number">1</span>]
</span>  -<span class="ruby">-oltp-dist-res=<span class="constant">N</span>               percentage of <span class="string">'special'</span> values to use (<span class="keyword">for</span> special distribution) [<span class="number">75</span>]
</span>
General database options:

  -<span class="ruby">-db-driver=<span class="constant">STRING</span>  specifies database driver to use (<span class="string">'help'</span> to get list of available drivers)
</span>  -<span class="ruby">-db-ps-mode=<span class="constant">STRING</span> prepared statements usage mode {auto, disable} [auto]
</span>

Compiled-in database drivers:
  mysql - MySQL driver

mysql options:
  -<span class="ruby">-mysql-host=[<span class="constant">LIST</span>,...]       <span class="constant">MySQL</span> server host [localhost]
</span>  -<span class="ruby">-mysql-port=<span class="constant">N</span>                <span class="constant">MySQL</span> server port [<span class="number">3306</span>]
</span>  -<span class="ruby">-mysql-socket=<span class="constant">STRING</span>         <span class="constant">MySQL</span> socket
</span>  -<span class="ruby">-mysql-user=<span class="constant">STRING</span>           <span class="constant">MySQL</span> user [sbtest]
</span>  -<span class="ruby">-mysql-password=<span class="constant">STRING</span>       <span class="constant">MySQL</span> password []
</span>  -<span class="ruby">-mysql-db=<span class="constant">STRING</span>             <span class="constant">MySQL</span> database name [sbtest]
</span>  -<span class="ruby">-mysql-table-engine=<span class="constant">STRING</span>   storage engine to use <span class="keyword">for</span> the test table {myisam,innodb,bdb,heap,ndbcluster,federated} [innodb]
</span>  -<span class="ruby">-mysql-engine-trx=<span class="constant">STRING</span>     whether storage engine used is transactional <span class="keyword">or</span> <span class="keyword">not</span> {yes,no,auto} [auto]
</span>  -<span class="ruby">-mysql-ssl=[on|off]          use <span class="constant">SSL</span> connections, <span class="keyword">if</span> available <span class="keyword">in</span> the client library [off]
</span>  -<span class="ruby">-myisam-max-rows=<span class="constant">N</span>           max-rows parameter <span class="keyword">for</span> <span class="constant">MyISAM</span> tables [<span class="number">1000000</span>]
</span>  -<span class="ruby">-mysql-create-options=<span class="constant">STRING</span> additional options passed to <span class="constant">CREATE</span> <span class="constant">TABLE</span> []</span>
</pre></td></tr></table></figure>

<p>后续将继续关注数据测试结果.</p>
<h4 id="3_关于libtool错误的其它参考">3 关于<code>libtool</code>错误的其它参考</h4>
<p><a href="http://wenku.baidu.com/link?url=DGlHEoWxiLWq4829Qp_7ngYB9r3glfkk_JOHEVNDedUWDSWJxYRPiv55KWkhSPnkeKPXjn2O2N6n-Xgqi_j4c2j2GIRfqU66l2NlWZ0mHSK" target="_blank" rel="external">http://wenku.baidu.com/link?url=DGlHEoWxiLWq4829Qp_7ngYB9r3glfkk_JOHEVNDedUWDSWJxYRPiv55KWkhSPnkeKPXjn2O2N6n-Xgqi_j4c2j2GIRfqU66l2NlWZ0mHSK</a></p>
<h4 id="4_sysbench-4-12和dbt2官方测试源址">4  <code>sysbench-4.12</code>和<code>dbt2</code>官方测试源址</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>wget http://downloads<span class="preprocessor">.mysql</span><span class="preprocessor">.com</span>/source/sysbench-<span class="number">0.4</span><span class="number">.12</span><span class="number">.5</span><span class="preprocessor">.tar</span><span class="preprocessor">.gz</span>
gunzip sysbench-<span class="number">0.4</span><span class="number">.12</span><span class="number">.5</span><span class="preprocessor">.tar</span><span class="preprocessor">.gz</span>
tar -xvf sysbench-<span class="number">0.4</span><span class="number">.12</span><span class="number">.5</span><span class="preprocessor">.tar</span>
cd sysbench-<span class="number">0.4</span><span class="number">.12</span><span class="number">.5</span>

wget http://downloads<span class="preprocessor">.mysql</span><span class="preprocessor">.com</span>/source/dbt2-<span class="number">0.37</span><span class="number">.50</span><span class="number">.3</span><span class="preprocessor">.tar</span><span class="preprocessor">.gz</span>
</pre></td></tr></table></figure>

<p>欢迎参见<a href="https://github.com/iofdata/DM/issues/5" target="_blank" rel="external">Details</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/07/22/20140722-sysbench-install/" data-id="4k25hbprfxdzqlmu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sysbench/">sysbench</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20140722-mysql-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/22/20140722-mysql-install/" class="article-date">
  <time datetime="2014-07-22T03:51:00.000Z" itemprop="datePublished">Jul 22 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/22/20140722-mysql-install/">A First Glance at MySQL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="A_安装MySQL">A 安装MySQL</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="code"><pre><span class="preprocessor">##wget http://192.168.2.2:8080/download/MySQL-client-5.6.19-1.el6.x86_64.rpm</span>
<span class="preprocessor">##wget http://192.168.2.2:8080/download/MySQL-server-5.6.19-1.el6.x86_64.rpm</span>
wget -c http://dev<span class="preprocessor">.mysql</span><span class="preprocessor">.com</span>/get/Downloads/MySQL-<span class="number">5.6</span>/MySQL-*-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>/from/http://mysql<span class="preprocessor">.spd</span><span class="preprocessor">.co</span><span class="preprocessor">.il</span>/

rpm -ivg MySQL-server-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>
<span class="preprocessor">## 报错</span>
<span class="preprocessor">## file /usr/share/mysql/czech/errmsg.sys from install of MySQL-server-5.6.19-1.el6.x86_64 conflicts with file from package mysql-libs-5.1.71-1.el6.x86_64</span>

yum remove mysql-libs-<span class="number">5.1</span>.*
rpm -ivh MySQL-server-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>
rpm -ivg MySQL-client-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>
rpm -ivh MySQL-devle-<span class="number">5.6</span><span class="number">.19</span>-<span class="number">1.</span>el6<span class="preprocessor">.x</span>86_64<span class="preprocessor">.rpm</span>

<span class="preprocessor">## check and start MySQL</span>
chkconfig | grep mysql
service mysql start

<span class="preprocessor">## 数据目录</span>
lsof|grep mysql
ll -rt /var/lib/mysql/

<span class="preprocessor">## mysql 配置文件</span>
ll -rt /usr/share/mysql/

<span class="preprocessor">## 相关程序命令</span>
which mysql
/usr/bin/mysql

<span class="preprocessor">## 启动脚本</span>
ll -rt /etc/rc<span class="preprocessor">.d</span>/init<span class="preprocessor">.d</span>/
</pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/07/22/20140722-mysql-install/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/07/22/20140722-mysql-install/" data-id="x16zsjxceozqpne7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20140709-tools" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/09/20140709-tools/" class="article-date">
  <time datetime="2014-07-09T03:51:00.000Z" itemprop="datePublished">Jul 9 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tools/">Tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/09/20140709-tools/">Data Sicence ToolBox</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1_Download_file">1 Download file</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="code"><pre><span class="keyword">if</span>(!<span class="built_in">file</span>.exists(<span class="string">"data"</span>)){
    dir.creat(<span class="string">"data"</span>)
}
fileurl &lt;- <span class="string">"http://"</span>
download.<span class="built_in">file</span>(fileurl, destfile=<span class="string">"./data/data.csv"</span>, method=<span class="string">"curl"</span>)
list.<span class="built_in">files</span>(<span class="string">"./data"</span>)
dateDownloaded &lt;- <span class="built_in">date</span>()

<span class="built_in">read</span>.table(<span class="string">"./data/data.csv"</span>)
<span class="built_in">read</span>.xlsx(<span class="string">"./data/data.xlsx"</span>, sheetIndex=<span class="number">1</span>, header=<span class="constant">TRUE</span>)

library(XML)
fileurl &lt;- <span class="string">"http://www.w3c.com/xml/simple.xml"</span>
doc &lt;- xmlTreeParse(fileurl, useInternal=<span class="constant">TRUE</span>)
rootNode &lt;- xmlRoot(doc)
xmlName(rootNode)
xmlSApply(rootNode, xmlValue)
xpathSApply(rootNode,<span class="comment">"//name",xmlvale)</span>


library(jsonlite)
jsonData &lt;- fromJSON(<span class="string">""</span>)
toJSON()

library(RMySQL)
biocLite(<span class="string">"rhdf5"</span>)
</pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/07/09/20140709-tools/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/07/09/20140709-tools/" data-id="04792y7c4yvh63ml" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-20140707-r-prog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/07/20140707-r-prog/" class="article-date">
  <time datetime="2014-07-07T03:51:00.000Z" itemprop="datePublished">Jul 7 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/R/">R</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/07/20140707-r-prog/">R Programming Tips</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1_Data_Types_and_Basic_Operations">1 Data Types and Basic Operations</h3>
<p>R has five basic or “atomic” classes of objects:</p>
<ul>
<li>character</li>
<li>numeric (real numbers)</li>
<li>integer</li>
<li>complex</li>
<li>logical (True/False)</li>
</ul>
<h4 id="Vector_and_Matrix">Vector and Matrix</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="function">vector()</span>
x &lt;- <span class="function">vector(<span class="string">"numeric"</span>, length = <span class="number">10</span>)</span>

<span class="function">c()</span>
x &lt;- <span class="function">c(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span>
x &lt;- <span class="function">c(TRUE, FALSE)</span>
as<span class="class">.numeric</span>(x)
as<span class="class">.logical</span>(x)
as<span class="class">.character</span>(x)

<span class="function">attributes()</span> 
<span class="function">print()</span>

m &lt;- <span class="function">matrix(nrow = <span class="number">2</span>, ncol = <span class="number">3</span>)</span>
m &lt;- <span class="function">matrix(<span class="number">1</span>:<span class="number">6</span>, nrow = <span class="number">2</span>, ncol = <span class="number">3</span>)</span>

m&lt;-1<span class="value">:<span class="number">10</span>
dim(m) &lt;- c(<span class="number">2</span>, <span class="number">5</span>)

cbind(x, y)
rbind(x, y)</span>
</pre></td></tr></table></figure>

<h4 id="list">list</h4>
<p>Lists are a special type of vector that can contain elements of different classes. </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>x &lt;- <span class="keyword">list</span>(<span class="number">1</span>, <span class="string">"a"</span>, <span class="keyword">TRUE</span>, <span class="number">1</span> + <span class="number">4</span>i)
</pre></td></tr></table></figure>

<h4 id="Factor">Factor</h4>
<p>Factors are used to represent categorical data. Factors can be unordered or ordered. One can think of a factor as an integer vector where each integer has a label.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="function">lm()</span>
<span class="function">glm()</span>

x &lt;- <span class="function">factor(<span class="function">c(<span class="string">"yes"</span>, <span class="string">"yes"</span>, <span class="string">"no"</span>, <span class="string">"yes"</span>, <span class="string">"no"</span>)</span>)</span>
<span class="function">table(x)</span>

x &lt;- <span class="function">factor(<span class="function">c(<span class="string">"yes"</span>, <span class="string">"yes"</span>, <span class="string">"no"</span>, <span class="string">"yes"</span>, <span class="string">"no"</span>)</span>, levels = <span class="function">c(<span class="string">"yes"</span>, <span class="string">"no"</span>)</span>)</span>
</pre></td></tr></table></figure>

<h4 id="Missing_Values">Missing Values</h4>
<p>Missing values are denoted by <code>NA</code> or <code>NaN</code> for undefined mathematical operations.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre>x &lt;- <span class="function">c(<span class="number">1</span>,<span class="number">2</span>,NaN,NA,<span class="number">4</span>)</span>
is<span class="class">.na</span>(x)
is<span class="class">.nan</span>(x)

x&lt;<span class="function">-c(<span class="number">1</span>,<span class="number">2</span>,NA,<span class="number">4</span>,NA,<span class="number">5</span>)</span>
bad &lt;- is<span class="class">.na</span>(x)
x<span class="attr_selector">[!bad]</span>

#### What if there are multiple things and you want to take the subset with no missing values?
x&lt;<span class="function">-c(<span class="number">1</span>,<span class="number">2</span>,NA,<span class="number">4</span>,NA,<span class="number">5</span>)</span>
y &lt;- <span class="function">c(<span class="string">"a"</span>, <span class="string">"b"</span>, NA, <span class="string">"d"</span>, NA, <span class="string">"f"</span>)</span>
good &lt;- complete<span class="class">.cases</span>(x, y)
x<span class="attr_selector">[good]</span>
y<span class="attr_selector">[good]</span>

df<span class="attr_selector">[1:6,]</span>
good &lt;- complete<span class="class">.cases</span>(df)
df<span class="attr_selector">[good,]</span><span class="attr_selector">[1:6,]</span>

x &lt;- df<span class="attr_selector">[df$Month==5,]</span>
<span class="function">summary(x$Ozone)</span>
</pre></td></tr></table></figure>

<h4 id="Data_frames_are_used_to_store_tabular_data">Data frames are used to store tabular data</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="title">row</span>.names
<span class="title">read</span>.table()
<span class="title">read</span>.csv()
<span class="typedef"><span class="keyword">data</span>.matrix<span class="container">()</span></span>

<span class="title">x</span> &lt;- <span class="typedef"><span class="keyword">data</span>.frame<span class="container">(<span class="title">foo</span> = 1:4, <span class="title">bar</span> = <span class="title">c</span>(<span class="type">T</span>, <span class="type">T</span>, <span class="type">F</span>, <span class="type">F</span>)</span>)</span>
</pre></td></tr></table></figure>

<h4 id="Names">Names</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>x&lt;-<span class="number">1</span>:<span class="number">3</span>
<span class="function"><span class="title">names</span><span class="params">(x)</span>
<span class="title">names</span><span class="params">(x)</span> &lt;- <span class="title">c</span><span class="params">(<span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="string">"norf"</span>)</span>
<span class="title">x</span>

<span class="title">x</span>&lt;-<span class="title">list</span><span class="params">(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>)</span>

<span class="title">m</span> &lt;- <span class="title">matrix</span><span class="params">(<span class="number">1</span>:<span class="number">4</span>, nrow = <span class="number">2</span>, ncol = <span class="number">2</span>)</span>
<span class="title">dimnames</span><span class="params">(m)</span> &lt;- <span class="title">list</span><span class="params">(<span class="function_name">c</span>(<span class="string">"a"</span>, <span class="string">"b"</span>), <span class="function_name">c</span>(<span class="string">"c"</span>, <span class="string">"d"</span>))</span></span>
</pre></td></tr></table></figure>


<h3 id="2_Deal_with_data">2 Deal with data</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre>read.table()    #<span class="keyword">for</span> reading tabular data
read.csv()
write.table()

readLines()     #<span class="keyword">for</span> reading lines of a <span class="keyword">text</span> <span class="keyword">file</span>
writeLines()

<span class="keyword">source</span>()        #<span class="keyword">for</span> reading <span class="keyword">in</span> R code files
dump()

dump(c(<span class="string">"x"</span>, <span class="string">"y"</span>), <span class="keyword">file</span> = <span class="string">"data.R"</span>)
rm(x, y)
<span class="keyword">source</span>(<span class="string">"data.R"</span>)

dget()          #<span class="keyword">for</span> reading <span class="keyword">in</span> R code files 
dput()

load()          #<span class="keyword">for</span> reading <span class="keyword">in</span> saved workspaces
save()

unserialize()   #<span class="keyword">for</span> reading single R objects <span class="keyword">in</span> binary form
serialize()
</pre></td></tr></table></figure>

<h4 id="Data_are_read_in_using_connection_interfaces-">Data are read in using connection interfaces.</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>file     <span class="comment">#opens a connection to a file</span>
gzfile   <span class="comment">#opens a connection to a file compressed with gzip</span>
bzfile   <span class="comment">#opens a connection to a file compressed with bzip2</span>
url      <span class="comment">#opens a connection to a webpage</span>

str(file)
con &lt;- file(<span class="string">"foo.txt"</span>, <span class="string">"r"</span>)
data &lt;- read.csv(con)
close(con)

con &lt;- gzfile(<span class="string">"words.gz"</span>)
x &lt;- readLines(con, <span class="number">10</span>)

con &lt;- url(<span class="string">"http://www.jhsph.edu"</span>, <span class="string">"r"</span>)
x &lt;- readLines(con)

args(paste)
<span class="keyword">function</span> (<span class="keyword">...</span>, sep = <span class="string">" "</span>, collapse = <span class="literal">NULL</span>)
</pre></td></tr></table></figure>

<p>I have a data frame with 1,500,000 rows and 120 columns, all of which are numeric data. Roughly, how much memory is required to store this data frame?</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="number">1</span>,<span class="number">500</span>,<span class="number">000</span> × <span class="number">120</span> × <span class="number">8</span> <span class="keyword">bytes</span>/<span class="keyword">numeric</span> = <span class="number">1.34</span> GB
</pre></td></tr></table></figure>

<h3 id="3_Control_structures">3 Control structures</h3>
<ul>
<li><code>if</code>, <code>else</code>: testing a condition</li>
<li><code>for</code>: execute a loop a fixed number of times</li>
<li><code>while</code>: execute a loop while a condition is true · repeat: execute an infinite loop</li>
<li><code>break</code>: break the execution of a loop</li>
<li><code>next</code>: skip an interation of a loop</li>
<li><code>return</code>: exit a function</li>
</ul>
<h3 id="4_Looping_on_the_Command_Line">4 Looping on the Command Line</h3>
<ul>
<li><code>lapply</code>: Loop over a list and evaluate a function on each element · </li>
<li><code>sapply</code>: Same as lapply but try to simplify the result</li>
<li><code>apply</code>:  Apply a function over the margins of an array</li>
<li><code>tapply</code>: Apply a function over subsets of a vector</li>
<li><code>mapply</code>: Multivariate version of lapply</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre>x &lt;- list(a = <span class="number">1</span>:<span class="number">5</span>, b = rnorm(<span class="number">10</span>))
lapply(x, mean)  #

x&lt;-<span class="number">1</span>:<span class="number">4</span>
lapply(x, runif, min = <span class="number">0</span>, max = <span class="number">10</span>)

##### lapply <span class="keyword">and</span> friends make heavy <span class="keyword">use</span> <span class="keyword">of</span> anonymous functions.
x &lt;- list(a = matrix(<span class="number">1</span>:<span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>), b = matrix(<span class="number">1</span>:<span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>))
lapply(x, <span class="keyword">function</span>(elt) elt[,<span class="number">1</span>])

##### sapply will try <span class="keyword">to</span> simplify the result <span class="keyword">of</span> lapply <span class="keyword">if</span> possible.
##### <span class="keyword">If</span> the result <span class="keyword">is</span> a list where every element <span class="keyword">is</span> length <span class="number">1</span>, <span class="keyword">then</span> a vector <span class="keyword">is</span> returned
##### <span class="keyword">If</span> the result <span class="keyword">is</span> a list where every element <span class="keyword">is</span> a vector <span class="keyword">of</span> the same length (&gt; <span class="number">1</span>), a matrix <span class="keyword">is</span> returned.
##### <span class="keyword">If</span> it can’t figure things <span class="keyword">out</span>, a list <span class="keyword">is</span> returned.
x &lt;- list(a = <span class="number">1</span>:<span class="number">4</span>, b = rnorm(<span class="number">10</span>), c = rnorm(<span class="number">20</span>, <span class="number">1</span>), d = rnorm(<span class="number">100</span>, <span class="number">5</span>))
lapply(x, mean)
sapply(x, mean)
</pre></td></tr></table></figure>

<h4 id="applay">applay</h4>
<p><code>apply</code> is used to a evaluate a function (often an anonymous one) over the margins of an array.</p>
<ul>
<li>It is most often used to apply a function to the rows or columns of a matrix.</li>
<li>It can be used with general arrays, e.g. taking the average of an array of matrices</li>
<li>It is not really faster than writing a loop, but it works in one line!</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="function"><span class="title">str</span><span class="params">(apply)</span>
<span class="title">x</span> &lt;- <span class="title">matrix</span><span class="params">(<span class="function_name">rnorm</span>(<span class="number">200</span>), <span class="number">20</span>, <span class="number">10</span>)</span>
<span class="title">apply</span><span class="params">(x, <span class="number">2</span>, mean)</span>
<span class="title">apply</span><span class="params">(x, <span class="number">1</span>, sum)</span>

<span class="title">rowSums</span> = <span class="title">apply</span><span class="params">(x, <span class="number">1</span>, sum)</span>
<span class="title">rowMeans</span> = <span class="title">apply</span><span class="params">(x, <span class="number">1</span>, mean)</span>
<span class="title">colSums</span> = <span class="title">apply</span><span class="params">(x, <span class="number">2</span>, sum)</span>
<span class="title">colMeans</span> = <span class="title">apply</span><span class="params">(x, <span class="number">2</span>, mean)</span>

<span class="title">x</span> &lt;- <span class="title">matrix</span><span class="params">(<span class="function_name">rnorm</span>(<span class="number">200</span>), <span class="number">20</span>, <span class="number">10</span>)</span>
<span class="title">apply</span><span class="params">(x, <span class="number">1</span>, quantile, probs = <span class="function_name">c</span>(<span class="number">0.25</span>, <span class="number">0.75</span>))</span>

<span class="title">a</span> &lt;- <span class="title">array</span><span class="params">(<span class="function_name">rnorm</span>(<span class="number">2</span> * <span class="number">2</span> * <span class="number">10</span>), <span class="function_name">c</span>(<span class="number">2</span>, <span class="number">2</span>, <span class="number">10</span>))</span>
<span class="title">apply</span><span class="params">(a, <span class="function_name">c</span>(<span class="number">1</span>, <span class="number">2</span>), mean)</span>
<span class="title">rowMeans</span><span class="params">(a, dims = <span class="number">2</span>)</span></span>
</pre></td></tr></table></figure>

<h4 id="tapply">tapply</h4>
<p><code>tpply</code> is used to apply a function over subsets of a vector. </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="function">str(tapply)</span>

x &lt;- <span class="function">c(<span class="function">rnorm(<span class="number">10</span>)</span>, <span class="function">runif(<span class="number">10</span>)</span>, <span class="function">rnorm(<span class="number">10</span>, <span class="number">1</span>)</span>)</span>
f&lt;<span class="function">-gl(<span class="number">3</span>,<span class="number">10</span>)</span>
<span class="function">tapply(x, f, mean)</span>


<span class="function">with(mtcars, <span class="function">tapply(hp, cyl, mean)</span>)</span>
<span class="function">sapply(<span class="function">split(mtcars$hp, mtcars$cyl)</span>, mean)</span>
</pre></td></tr></table></figure>

<h4 id="split">split</h4>
<p><code>split</code> takes a vector or other objects and splits it into groups determined by a factor or list of factors.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="function">str(split)</span>
x &lt;- <span class="function">c(<span class="function">rnorm(<span class="number">10</span>)</span>, <span class="function">runif(<span class="number">10</span>)</span>, <span class="function">rnorm(<span class="number">10</span>, <span class="number">1</span>)</span>)</span>
f&lt;<span class="function">-gl(<span class="number">3</span>,<span class="number">10</span>)</span>
<span class="function">split(x, f)</span>
<span class="function">lapply(<span class="function">split(x, f)</span>, mean)</span>

##### splitting <span class="tag">a</span> Data <span class="tag">Frame</span>
<span class="function">library(datasets)</span>
<span class="function">head(airquality)</span>
s &lt;- <span class="function">split(airquality, airquality$Month)</span>
<span class="function">lapply(s, <span class="function">function(x)</span> <span class="function">colMeans(x[, <span class="function">c(<span class="string">"Ozone"</span>, <span class="string">"Solar.R"</span>, <span class="string">"Wind"</span>)</span>])</span>)</span>
<span class="function">sapply(s, <span class="function">function(x)</span> <span class="function">colMeans(x[, <span class="function">c(<span class="string">"Ozone"</span>, <span class="string">"Solar.R"</span>, <span class="string">"Wind"</span>)</span>])</span>)</span>
<span class="function">sapply(s, <span class="function">function(x)</span> <span class="function">colMeans(x[, <span class="function">c(<span class="string">"Ozone"</span>, <span class="string">"Solar.R"</span>, <span class="string">"Wind"</span>)</span>], na.rm = TRUE)</span>)</span>

##### split more than one level
x &lt;- <span class="function">rnorm(<span class="number">10</span>)</span>
f1&lt;<span class="function">-gl(<span class="number">2</span>,<span class="number">5</span>)</span>
f2&lt;<span class="function">-gl(<span class="number">5</span>,<span class="number">2</span>)</span>
<span class="function">interaction(f1, f2)</span>
<span class="function">str(<span class="function">split(x, <span class="function">list(f1, f2)</span>)</span>)</span>
<span class="function">str(<span class="function">split(x, <span class="function">list(f1, f2)</span>, drop = TRUE)</span>)</span>
</pre></td></tr></table></figure>

<h4 id="maaply">maaply</h4>
<p><code>mapply</code> is a multivariate apply of sorts which applies a function in parallel over a set of arguments.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="function">str(mapply)</span>

<span class="function">list(<span class="function">rep(<span class="number">1</span>, <span class="number">4</span>)</span>, <span class="function">rep(<span class="number">2</span>, <span class="number">3</span>)</span>, <span class="function">rep(<span class="number">3</span>, <span class="number">2</span>)</span>, <span class="function">rep(<span class="number">4</span>, <span class="number">1</span>)</span>)</span>
<span class="function">mapply(rep, <span class="number">1</span>:<span class="number">4</span>, <span class="number">4</span>:<span class="number">1</span>)</span>
</pre></td></tr></table></figure>

<h4 id="reshape">reshape</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="function">library(<span class="string">"reshape2"</span>)</span>

##### metlting data frames
<span class="function">melt(mtcars, id=<span class="function">c(<span class="string">"carname"</span>,<span class="string">"gear"</span>,<span class="string">"cyl"</span>)</span>, measure.vars=<span class="function">c(<span class="string">"mpg"</span>,<span class="string">"hp"</span>)</span>)</span>

##### casting data frames
<span class="function">dcast(carMelt, cyl ~ variable, mean)</span>
</pre></td></tr></table></figure>

<h4 id="plyr">plyr</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="function"><span class="title">ddply</span><span class="params">()</span></span>
</pre></td></tr></table></figure>


<h4 id="str">str</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre>str(str)
str(lm)
str(ls)

args(paste)
<span class="function"><span class="keyword">function</span> <span class="params">(..., sep = <span class="string">" "</span>, collapse = NULL)</span>

<span class="title">x</span> &lt;- <span class="title">rnrom</span><span class="params">(<span class="number">100</span>,<span class="number">2</span>,<span class="number">4</span>)</span>
<span class="title">summary</span><span class="params">(x)</span>
<span class="title">str</span><span class="params">(x)</span>

<span class="title">f</span> &lt;- <span class="title">gl</span><span class="params">(<span class="number">40</span>,<span class="number">10</span>)</span>
<span class="title">str</span><span class="params">(f)</span>
<span class="title">summary</span><span class="params">(f)</span>

### <span class="title">split</span><span class="params">()</span>
### <span class="title">split</span> <span class="title">takes</span> <span class="title">a</span> <span class="title">vector</span> <span class="title">or</span> <span class="title">other</span> <span class="title">objects</span> <span class="title">and</span> <span class="title">splits</span> <span class="title">it</span> <span class="title">into</span> <span class="title">groups</span> <span class="title">determined</span> <span class="title">by</span> <span class="title">a</span> <span class="title">factor</span> <span class="title">or</span> <span class="title">list</span> <span class="title">of</span> <span class="title">factors</span>.
<span class="title">str</span><span class="params">(split)</span>
<span class="title">x</span> &lt;- <span class="title">c</span><span class="params">(rnorm<span class="params">(<span class="number">10</span>)</span>, runif<span class="params">(<span class="number">10</span>)</span>, rnorm<span class="params">(<span class="number">10</span>, <span class="number">1</span>)</span>)</span>
<span class="title">f</span>&lt;-<span class="title">gl</span><span class="params">(<span class="number">3</span>,<span class="number">10</span>)</span>
<span class="title">split</span><span class="params">(x, f)</span>

### <span class="title">A</span> <span class="title">common</span> <span class="title">idiom</span> <span class="title">is</span> <span class="title">split</span> <span class="title">followed</span> <span class="title">by</span> <span class="title">an</span> <span class="title">lapply</span>
<span class="title">lapply</span><span class="params">(split<span class="params">(x, f)</span>, mean)</span></span>
</pre></td></tr></table></figure>

<h3 id="5_Generating_random_Numbers">5 Generating random Numbers</h3>
<ul>
<li><code>d</code> for density                 -&gt;pdf</li>
<li><code>r</code> for random number generation</li>
<li><code>p</code> for cumulative distribution -&gt; cdf</li>
<li><code>q</code> for quantile function       </li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>dnorm(x, mean = <span class="number">0</span>, sd = <span class="number">1</span>, <span class="built_in">log</span> = <span class="constant">FALSE</span>)
<span class="comment">##### pnorm(q) = fi(q); qnorm(p) = fi(q)反函数</span>
pnorm(q, mean = <span class="number">0</span>, sd = <span class="number">1</span>, <span class="built_in">lower</span>.tail = <span class="constant">TRUE</span>, <span class="built_in">log</span>.p = <span class="constant">FALSE</span>)
qnorm(p, mean = <span class="number">0</span>, sd = <span class="number">1</span>, <span class="built_in">lower</span>.tail = <span class="constant">TRUE</span>, <span class="built_in">log</span>.p = <span class="constant">FALSE</span>)
rnorm(n, mean = <span class="number">0</span>, sd = <span class="number">1</span>)

x &lt;- rnorm(<span class="number">10</span>,<span class="number">20</span>,<span class="number">10</span>)
summary(x)

<span class="comment">### Setting the random number seed with set.seed ensures reproducibility</span>
<span class="comment">### Always set the random number seed when conducting a simulation!</span>
<span class="built_in">set</span>.seed(<span class="number">1</span>)
</pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/07/07/20140707-r-prog/" data-id="nu46u2yf906djxvp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/">R</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tips/">Tips</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools/">Tools</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
    <article id="post-python-in-a-nutshell-tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/23/python-in-a-nutshell-tips/" class="article-date">
  <time datetime="2014-06-23T03:51:00.000Z" itemprop="datePublished">Jun 23 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/23/python-in-a-nutshell-tips/">Python in a Nutshell (Useful Tips)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="List">List</h3>
<h3 id="lambda_Expressions">lambda Expressions</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="prompt">&gt;&gt;&gt; </span>aList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]
<span class="prompt">&gt;&gt;&gt; </span>low = <span class="number">3</span>
<span class="prompt">&gt;&gt;&gt; </span>high = <span class="number">7</span>
<span class="prompt">&gt;&gt;&gt; </span>filter(<span class="keyword">lambda</span> x, l=low, h=high: h&gt;x&gt;l, aList)
[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]
<span class="comment"># or</span>
<span class="prompt">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">within_bounds</span><span class="params">(value, l=low, h=high)</span>:</span><span class="keyword">return</span> h&gt;value&gt;l
<span class="prompt">&gt;&gt;&gt; </span>filter(within_bounds, aList)
</pre></td></tr></table></figure>


        
          <p class="article-more-link">
            <a href="/2014/06/23/python-in-a-nutshell-tips/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://buttonwood.bitbucket.org/2014/06/23/python-in-a-nutshell-tips/" data-id="7v0wkrbmfsqkbkr3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tips/">Tips</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- DISQUS

-->



  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
    <h3 class="widget-title">About</h3>
    <div class="widget">
    <img src="http://ww1.sinaimg.cn/mw690/6fbc15dcjw1do9bywpfjjj.jpg" style="margin: auto; width: 100%;"/>
        <h4 style="text-align: center"><strong>Buttonwood(th)</strong></h4>
        <div style="margin: auto; text-align: center;">
            <a href="http://weibo.com/buttonwood" target="_blank"><img src="http://www.sinaimg.cn/blog/developer/wiki/LOGO_64x64.png" style="border:0;width:32px;height:32px;"/></a>
            <a href="https://github.com/Buttonwood" target="_blank"><img src="https://assets-cdn.github.com/images/modules/logos_page/Octocat.png" style="border:0;width:32px;height:32px;"/></a>
            <a class="fancybox" href="mailto:tanhao2013@gmail.com"><img src="http://icons.iconarchive.com/icons/mcdo-design/letter/64/Letter-GMail-pen-icon.png" style="border:0;width:32px;height:32px;"/></a>
            <a href="http://www.douban.com/people/buttonwood/" target="_blank"><img src="http://img3.douban.com/pics/douban-icons/favicon_32x32.png" style="border:0;width:32px;height:32px;"/></a>
        </div>
    </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Mining/">Data Mining</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Visualization/">Data Visualization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/R/">R</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CART/">CART</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Circos/">Circos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DV/">DV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EM/">EM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ML/">ML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/">Mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PageRank/">PageRank</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/">R</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SVM/">SVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/">Thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tips/">Tips</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/books/">books</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/classification/">classification</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clustering/">clustering</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k-means/">k-means</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kNN/">kNN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sysbench/">sysbench</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CART/" style="font-size: 10.00px;">CART</a><a href="/tags/Circos/" style="font-size: 10.00px;">Circos</a><a href="/tags/DV/" style="font-size: 10.00px;">DV</a><a href="/tags/EM/" style="font-size: 10.00px;">EM</a><a href="/tags/Git/" style="font-size: 10.00px;">Git</a><a href="/tags/ML/" style="font-size: 12.00px;">ML</a><a href="/tags/MySQL/" style="font-size: 16.00px;">MySQL</a><a href="/tags/Mysql/" style="font-size: 10.00px;">Mysql</a><a href="/tags/PageRank/" style="font-size: 10.00px;">PageRank</a><a href="/tags/Python/" style="font-size: 20.00px;">Python</a><a href="/tags/R/" style="font-size: 14.00px;">R</a><a href="/tags/SVM/" style="font-size: 10.00px;">SVM</a><a href="/tags/Thread/" style="font-size: 10.00px;">Thread</a><a href="/tags/Tips/" style="font-size: 18.00px;">Tips</a><a href="/tags/Tools/" style="font-size: 20.00px;">Tools</a><a href="/tags/books/" style="font-size: 10.00px;">books</a><a href="/tags/classification/" style="font-size: 10.00px;">classification</a><a href="/tags/clustering/" style="font-size: 10.00px;">clustering</a><a href="/tags/k-means/" style="font-size: 10.00px;">k-means</a><a href="/tags/kNN/" style="font-size: 10.00px;">kNN</a><a href="/tags/sysbench/" style="font-size: 14.00px;">sysbench</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01">January 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06">June 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">May 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04">April 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02">February 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/01/14/Writing-idiomatic-python/">Writing idiomatic python</a>
          </li>
        
          <li>
            <a href="/2014/12/15/20141215-rChart/">rChart and morris.js</a>
          </li>
        
          <li>
            <a href="/2014/10/10/python_pocker_reference/">Python Pocket Reference</a>
          </li>
        
          <li>
            <a href="/2014/07/25/20140725-sysbench-mysql/">Sysbench for MySQL Testing</a>
          </li>
        
          <li>
            <a href="/2014/07/24/20140724-sysbench-testing/">sysbench testing</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1874597340&verifier=b3593ceb&dpc=1"></iframe>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 The Eye of Data ( <a href="http://buttonwood.github.io" target="_blank">@Buttonwood )</a><br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    




<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>